<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="assets/docs-v=1599487766.css">
		<link rel="stylesheet" type="text/css" href="assets/theme-v=1599487766.css">
		<link rel="search" type="application/opensearchdescription+xml" title="Gantt Docs" href="https://docs.dhtmlx.com/gantt/assets/opensearch.xml">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale = 1.0" />
		<meta name="description" content="" />
		<link href="assets/favicon.ico" rel="shortcut icon" />
		<!--[if lte IE 9]>
			<link rel="stylesheet" type="text/css" href="assets/ie.css" />
		<![endif]-->
		<!-- stub -->
		<title>Work Time Calculation  Gantt Docs</title>
	</head>
<body class="page_">
	<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5M5RCSJ');</script><!-- End Google Tag Manager -->
	<a name="top"></a>
	
	<div class='headerBox'>
	<div class="header">
		<div class='content'>
			<a href='https://dhtmlx.com' class='top_logo'></a>
			<div class='top_menu'>
				<a href="samples/index.html">Samples</a>
				<a href="https://forum.dhtmlx.com/viewforum.php?f=15">Forum</a>
				<a href="https://dhtmlx.com/docs/technical-support.shtml">Support</a>
			</div>
			<span><a href='index.html' style="color:white">Documentation</a></span>
		</div>
	</div>
	</div>

	<div class="body">
		<div class="content">
		<div class="navigation">
			<div id="doc_navigation">
			<div class="search">
				<form method="get" action="search.php">
					<input type="text" accesskey="f" name="query" placeholder="Search the docs..." value="" autocomplete="off">
						<button type="submit"><img src="assets/common/search_icon.png"/></button>
				</form>
			</div>
			<ul><li class=""><a href="desktop__task_types.html">Task Types</a></li><li class=""><a href="desktop__task_object_operations.html">Task Object/Id</a></li><li class=""><a href="desktop__task_tree_operations.html">Task Parent/Child</a></li><li class=""><a href="desktop__crud_task.html">Basic Operations with Tasks</a></li><li class=""><a href="desktop__unscheduled_tasks.html">Unscheduled Tasks</a></li><li class="toc-pro"><a href="desktop__split_tasks.html">Split Tasks</a></li><li class=""><a href="desktop__multiselection.html">Multi-Task Selection</a></li><li class=" current"><a href="desktop__working_time.html">Work Time Calculation</a></li><ul><li class="inner"><a href="desktop__working_time.html#enablingworktimecalculation">Enabling Work Time Calculation</a></li><li class="inner"><a href="desktop__working_time.html#taskdurationindecimalformat">Task duration in decimal format</a></li><li class="inner"><a href="desktop__working_time.html#globalsettings">Global Settings</a></li><li class="inner"><a href="desktop__working_time.html#multipleworktimecalendars">Multiple Work Time Calendars</a></li><li class="inner"><a href="desktop__working_time.html#assigningcalendartotask">Assigning Calendar to Task</a></li><li class="inner"><a href="desktop__working_time.html#assigningcalendartoresource">Assigning Calendar to Resource</a></li><li class="inner"><a href="desktop__working_time.html#assigningcalendartoproject">Assigning Calendar to Project</a></li><li class="inner"><a href="desktop__working_time.html#changingcalendardynamically">Changing Calendar Dynamically</a></li></ul><li class="toc-pro"><a href="desktop__critical_path.html">Critical Path</a></li><li class="toc-pro"><a href="desktop__baselines.html">Extra Elements in Timeline Area</a></li><li class="toc-pro"><a href="desktop__milestones.html">Milestones</a></li><li class=""><a href="desktop__tooltips.html">Tooltips for Gantt Elements</a></li><li class=""><a href="desktop__text_block_for_task.html">Displaying Contents of Tasks</a></li><li class=""><a href="desktop__readonly_mode.html">Read-Only Mode</a></li><li class=""><a href="desktop__validation.html">Validation</a></li><li class=""><a href="desktop__dnd.html">Dragging Tasks within the Timeline</a></li><li class=""><a href="desktop__advanced_dnd.html">Creating/Selecting Tasks with DnD</a></li></ul>
			</div>
		</div>	  
	  
		<div class='doc' id='doc_content'>
			
			
			<div class='breadcrumb'><a class="n1" href="index.html">Start</a><a class="n2" href="desktop__guides.html">Guides</a><a class="n3" href="desktop__task_bars.html">Configuring Tasks</a></div>
<!-- Content Area -->



<h1>Work Time Calculation</h1>

<p>By default, dhtmlxGantt calculates the duration of tasks in calendar time. It assumes that the final duration of the tasks can include weekends and holidays.</p>

<a name='enablingworktimecalculation'><h2>Enabling Work Time Calculation</h2></a>

<p>To provide calculating tasks' duration in work time, use the <a class="link-" href="api__gantt_work_time_config.html">work_time</a> option:</p>

<p class='snippet'>
Enabling the mode when tasks' duration is calculated in working time
</p>

<pre><code><pre class="js"><span class="xtra ln-xtra">gantt.<span class="me1">config</span>.<span class="me1">work_time</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>  <span class="co1">// removes non-working time from calculations </span></span><span class="xtra ln-xtra">gantt.<span class="me1">config</span>.<span class="me1">skip_off_time</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>    <span class="co1">// hides non-working time in the chart</span></span>&nbsp;
gantt.<span class="me1">init</span><span class="br0">&#40;</span><span class="st0">&quot;gantt_here&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>Please note that the <a class="link-pro" href="api__gantt_skip_off_time_config.html">skip_off_time</a> config option is available in the PRO version only.</p>

<p><a href='samples/09_worktime/02_working_days.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Working days as duration</a></p>

<div class='note'><p><p>Depending on the value of <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a>, dhtmlxGantt calculates the tasks' duration in different time units (e.g. if
duration_unit = "hour", the duration is calculated in the working hours).</p>
</p></div>

<p><img style="padding-top:25px;" src="media/desktop/calculating_different_time.png"/></p>

<a name='taskdurationindecimalformat'><h2>Task duration in decimal format</h2></a>

<div class='pronote'><p><p>This functionality is available in the PRO edition only.</p>
</p></div>

<p>Starting from v6.3 dhtmlxGantt allows specifying the duration of tasks in decimal format ("2.5 days", <br>"0.5 hours", "3.75 hours") via the <a class="link-pro" href="desktop__formatters_ext.html">Duration Formatter</a> module.</p>

<p>The important point to remember is that internally Gantt always stores the duration of tasks in integer values.</p>

<p>Whereas, the provided module allows parsing the duration of tasks from the format entered by the user into the format stored in Gantt (for example, instead of entered "1.5 hours" Gantt will store the number of minutes - <code>90</code>). Besides, the stored values can be converted into the readable format (from <code>12</code> hours to "0.5 days").</p>

<p><img src="media/desktop/decimal_duration.png"/></p>

<div class='note'><p><p>The duration of tasks can be represented as a fraction of an hour, day or any other supported by the <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> config unit, except for minutes.</p>
</p></div>

<h3>Implementing decimal format</h3>

<p>To provide displaying the duration of tasks in decimal format, follow the logic given below:</p>

<ul>
<li>set <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> to minute</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">work_time</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="xtra ln-xtra">gantt.<span class="me1">config</span>.<span class="me1">duration_unit</span> <span class="sy0">=</span> <span class="st0">&quot;minute&quot;</span><span class="sy0">;</span></span></pre></code></pre>

<p>Pay attention that you need to store task durations in a smaller unit than the units of the values displayed in decimal format. To put it simply:<br>
    - if you want a user to be able to specify durations as a fraction of an hour (e.g. "0.5 hours"), you need to set <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> to minute <br>
    - If you want a user to be able to specify durations as a fraction of a day, you need to set <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> to hour. In this case, users will be able to enter the duration of the task as "0.5 day", but "0.5 hour" will be rounded up to 1 hour, since the duration will be stored in integer hours.</p>

<div class='note'><p><p>By default, task dates are snapped to the time scale. If you have a time scale in days, you may want to disable it in order to be able to drag and drop a task to different hours within a day. <br>To enable this drag and drop, you need to disable <a class="link-" href="api__gantt_round_dnd_dates_config.html">round_dnd_dates</a> and set an appropriate value to <a class="link-" href="api__gantt_time_step_config.html">time_step</a>.</p>
</p></div>

<p>For example:</p>

<pre><code><pre class="js"><span class="co1">// global time step is 15 minutes, requires &quot;minute&quot; as duration units</span>
gantt.<span class="me1">config</span>.<span class="me1">time_step</span> <span class="sy0">=</span> <span class="nu0">15</span><span class="sy0">;</span>
gantt.<span class="me1">config</span>.<span class="me1">round_dnd_dates</span> <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span></pre></code></pre>

<p>or</p>

<pre><code><pre class="js"><span class="co1">// global time step is one hour, </span>
<span class="co1">// such value can be used when duration unit is set to &quot;hour&quot;</span>
gantt.<span class="me1">config</span>.<span class="me1">time_step</span> <span class="sy0">=</span> <span class="nu0">60</span><span class="sy0">;</span>
gantt.<span class="me1">config</span>.<span class="me1">round_dnd_dates</span> <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>create the <em>formatter</em> object for formatting the duration of tasks:</li>
</ul>

<pre><code><pre class="js"><span class="co1">// formatting the duration</span>
<span class="kw2">var</span> formatter <span class="sy0">=</span> gantt.<span class="me1">ext</span>.<span class="me1">formatters</span>.<span class="me1">durationFormatter</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    enter<span class="sy0">:</span> <span class="st0">&quot;day&quot;</span><span class="sy0">,</span> 
    store<span class="sy0">:</span> <span class="st0">&quot;minute&quot;</span><span class="sy0">,</span> <span class="co1">// duration_unit</span>
    format<span class="sy0">:</span> <span class="st0">&quot;day&quot;</span><span class="sy0">,</span>
    hoursPerDay<span class="sy0">:</span> <span class="nu0">8</span><span class="sy0">,</span>
    hoursPerWeek<span class="sy0">:</span> <span class="nu0">40</span><span class="sy0">,</span>
    daysPerMonth<span class="sy0">:</span> <span class="nu0">30</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>add the <em>formatter</em> object to the "Duration" column by defining the template function, that will return the <em>formatted duration of the task</em>, via the <strong>template</strong> attribute of the columns parameter:</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">columns</span> <span class="sy0">=</span> <span class="br0">&#91;</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;text&quot;</span><span class="sy0">,</span> tree<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">170</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> editor<span class="sy0">:</span> textEditor<span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">&quot;center&quot;</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> editor<span class="sy0">:</span> dateEditor<span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">,</span> label<span class="sy0">:</span><span class="st0">&quot;Duration&quot;</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">&quot;center&quot;</span><span class="sy0">,</span> 
<span class="xtra ln-xtra">        template<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span> <span class="br0">&#123;</span> </span><span class="xtra ln-xtra">            <span class="kw1">return</span> formatter.<span class="me1">format</span><span class="br0">&#40;</span>task.<span class="me1">duration</span><span class="br0">&#41;</span><span class="sy0">;</span> </span>        <span class="br0">&#125;</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">100</span><span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;add&quot;</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">44</span><span class="br0">&#125;</span>
<span class="br0">&#93;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>add the <em>formatter</em> object to the lightbox section by setting the <strong>formatter</strong> property for the <strong>time</strong> control</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">lightbox</span>.<span class="me1">sections</span> <span class="sy0">=</span> <span class="br0">&#91;</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;description&quot;</span><span class="sy0">,</span> height<span class="sy0">:</span> <span class="nu0">70</span><span class="sy0">,</span> map_to<span class="sy0">:</span> <span class="st0">&quot;text&quot;</span><span class="sy0">,</span> type<span class="sy0">:</span> <span class="st0">&quot;textarea&quot;</span><span class="sy0">,</span> <span class="kw3">focus</span><span class="sy0">:</span> <span class="kw2">true</span><span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;time&quot;</span><span class="sy0">,</span> type<span class="sy0">:</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">,</span> map_to<span class="sy0">:</span> <span class="st0">&quot;auto&quot;</span><span class="sy0">,</span> formatter<span class="sy0">:</span> formatter<span class="br0">&#125;</span>
<span class="br0">&#93;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>in case inline editing in Grid is enabled, you also need to add  the <em>formatter</em> object to the durationEditor object via the <strong>formatter</strong> attribute:</li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> durationEditor <span class="sy0">=</span> <span class="br0">&#123;</span>
    type<span class="sy0">:</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">,</span> 
    map_to<span class="sy0">:</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">,</span> 
<span class="xtra ln-xtra">    formatter<span class="sy0">:</span> formatter<span class="sy0">,</span> </span>    min<span class="sy0">:</span><span class="nu0">0</span><span class="sy0">,</span> max<span class="sy0">:</span><span class="nu0">1000</span>
    <span class="br0">&#125;</span><span class="sy0">;</span>
gantt.<span class="me1">config</span>.<span class="me1">columns</span> <span class="sy0">=</span> <span class="br0">&#91;</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;text&quot;</span><span class="sy0">,</span> tree<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">170</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">&quot;center&quot;</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">,</span> label<span class="sy0">:</span><span class="st0">&quot;Duration&quot;</span><span class="sy0">,</span> resize<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">&quot;center&quot;</span><span class="sy0">,</span> 
        template<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">return</span> formatter.<span class="me1">format</span><span class="br0">&#40;</span>task.<span class="me1">duration</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="xtra ln-xtra">    <span class="br0">&#125;</span><span class="sy0">,</span> editor<span class="sy0">:</span> durationEditor<span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">100</span><span class="br0">&#125;</span><span class="sy0">,</span> </span>    <span class="br0">&#123;</span><span class="kw3">name</span><span class="sy0">:</span> <span class="st0">&quot;add&quot;</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">44</span><span class="br0">&#125;</span>
<span class="br0">&#93;</span><span class="sy0">;</span></pre></code></pre>

<div class='note'><p><p>If you already have Gantt with the duration of tasks stored in minutes, hours or any other unit, you can also use the <a class="link-pro" href="desktop__formatters_ext.html">Duration Formatter</a> module to present the durations in decimal format.</p>
</p></div>

<a name='globalsettings'><h2>Global Settings</h2></a>

<h3 id="setworktime">Setting the working time</h3>

<p>The default working time is the following:</p>

<ul>
<li>Working days:  Monday - Friday.</li>
<li>Working hours: 8:00 - 12:00, 13:00 - 17:00.</li>
</ul>

<p>(<em>hours configuration is taken into account only when <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> is less than a day (hours or minutes)</em>).</p>

<p>To change the default working time, use the <a class="link-" href="api__gantt_setworktime.html">setWorkTime</a> method:</p>

<p class='snippet'>
Setting a custom working time
</p>

<pre><code><pre class="js"><span class="co1">//changes the working time of working days</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span> hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;9:00-18:00&quot;</span><span class="br0">&#93;</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//makes all Fridays days-off</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span> day<span class="sy0">:</span><span class="nu0">5</span><span class="sy0">,</span> hours<span class="sy0">:</span><span class="kw2">false</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//changes the working time for Fridays and Saturdays</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>day <span class="sy0">:</span> <span class="nu0">5</span><span class="sy0">,</span> hours <span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>day <span class="sy0">:</span> <span class="nu0">6</span><span class="sy0">,</span> hours <span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//makes a specific date a working day </span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date <span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">31</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//makes a specific date a day-off</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date<span class="sy0">:</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">,</span> hours<span class="sy0">:</span><span class="kw2">false</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre></code></pre>

<p><a href='samples/09_worktime/04_custom_workday_duration.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Custom working days and time</a></p>

<p>To specify the working time not only from an hour to hour (e.g."8:00-12:00") but also including minutes (e.g. "8:15-12:45"), set the <a class="link-" href="api__gantt_duration_unit_config.html">duration_unit</a> config to <em>"minute"</em>.</p>

<p class='snippet'>
Setting a custom working time up to minutes
</p>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">duration_unit</span> <span class="sy0">=</span> <span class="st0">&quot;minute&quot;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// sets the working time up to minutes</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:15-12:45&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<div class='note'><p><p>The format of the working time that was used up to version 7.0
will continue work as before:</p>

<pre><code><pre class="js">gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="nu0">9</span><span class="sy0">,</span> <span class="nu0">18</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre></code></pre>
</p></div>

<p>Note, each next call of the method for the same date will re-write the previous working-time rule. So, if you need to unset some rule, call the <a class="link-" href="api__gantt_setworktime.html">setWorkTime</a> method with other configuration:</p>

<pre><code><pre class="js">gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;13:00-17:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//the result of following commands will be the working time 13:00-17:00</span>
<span class="co1">//and not a mixin of both commands</span></pre></code></pre>

<h3 id="unsetworktime">Unsetting the working time</h3>

<p>You can unset a working time by using the <a class="link-" href="api__gantt_unsetworktime.html">unsetWorkTime</a> method:</p>

<pre><code><pre class="js"><span class="co1">//changes the working time of working days from [&quot;8:00-17:00&quot;] to [&quot;8:00-12:00&quot;]</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//unsets the working time</span>
gantt.<span class="me1">unsetWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<h3 id="checkworktime">Checking the working time</h3>

<p>To check whether the specified date is working time, use the <a class="link-" href="api__gantt_isworktime.html">isWorkTime</a> method:</p>

<pre><code><pre class="js"><span class="co1">//makes 1 January, 2019 a day off</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date<span class="sy0">:</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">,</span> hours<span class="sy0">:</span><span class="kw2">false</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="xtra ln-xtra">gantt.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="co1">// -&gt; false  </span></span>&nbsp;
<span class="co1">// makes 15 March, 2019 a working day from 9:00 till 18:00 </span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date <span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">&#41;</span><span class="sy0">,</span> hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:00-17:00&quot;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="xtra ln-xtra">gantt.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">15</span><span class="sy0">,</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;hour&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// -&gt; true  </span></span><span class="xtra ln-xtra">gantt.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">15</span><span class="sy0">,</span><span class="nu0">8</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;hour&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// -&gt;false</span></span></pre></code></pre>

<p><a href='samples/09_worktime/05_adjust_to_worktime.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Correct task position on drag</a></p>

<h3 id="getworktime">Getting the working time</h3>

<p>To get the working hours of the specified date, use the <a class="link-" href="api__gantt_getworkhours.html">getWorkHours</a> method:</p>

<pre><code><pre class="js">gantt.<span class="me1">getWorkHours</span><span class="br0">&#40;</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">30</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="co1">// -&gt; [&quot;8:00-17:00&quot;]</span></pre></code></pre>

<p>To get the closest working day to the specified date, use the <a class="link-" href="api__gantt_getclosestworktime.html">getClosestWorkTime</a> method:</p>

<pre><code><pre class="js">gantt.<span class="me1">getClosestWorkTime</span><span class="br0">&#40;</span><span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2019</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">30</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<h3 id="repeat_worktime">Repeating the specific working time</h3>

<p>You may often need to specify some working time that will repeat only on certain days (e.g. the last Friday of a month is a short day, December 25 is a holiday) but during the whole span of the project.</p>

<p>The current version of dhtmlxGantt doesn't provide any configs for setting such type of the working time and the library allows you only:</p>

<ul>
<li>to specify the working time for a day of the week (Monday, Tuesday,...)</li>
<li>to specify the working time for a specific date (4th June 2020)</li>
</ul>

<p>So if you have some exceptions to the working time rules you need to manually get the dates that match your rule and apply worktime settings to each of these dates separately.</p>

<p>For example, you have a project that lasts 5 years and you want to set the 1st of January as a day-off, and the last Friday of each month as a short day.</p>

<p>To specify the 1st of January as a day off you can simply hardcode values as in:</p>

<pre><code><pre class="js">gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="kw2">false</span><span class="sy0">,</span> date<span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2021</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="kw2">false</span><span class="sy0">,</span> date<span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2022</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="kw2">false</span><span class="sy0">,</span> date<span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2023</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="kw2">false</span><span class="sy0">,</span> date<span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2024</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="kw2">false</span><span class="sy0">,</span> date<span class="sy0">:</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2025</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>And here is a code sample of how to set the last Friday of a month as a short day during the whole project:</p>

<pre><code><pre class="js"><span class="kw2">function</span> lastFridayOfMonth<span class="br0">&#40;</span>date<span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw2">var</span> lastDay <span class="sy0">=</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span>date.<span class="me1">getFullYear</span><span class="sy0">,</span> date.<span class="me1">getMonth</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span>lastDay.<span class="me1">getDay</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        lastDay.<span class="me1">setDate</span><span class="br0">&#40;</span>lastDay.<span class="me1">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">-</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    lastDay.<span class="me1">setDate</span><span class="br0">&#40;</span>lastDay.<span class="me1">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">-</span> <span class="br0">&#40;</span>lastDay.<span class="me1">getDay</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">-</span><span class="nu0">5</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">return</span> lastDay<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">var</span> projectStart <span class="sy0">=</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2020</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">var</span> projectEnd <span class="sy0">=</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span><span class="nu0">2025</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">var</span> currentDate <span class="sy0">=</span> <span class="kw2">new</span> Date<span class="br0">&#40;</span>projectStart<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">while</span> <span class="br0">&#40;</span>currentDate.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;=</span> projectEnd.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
   <span class="kw2">var</span> lastFriday <span class="sy0">=</span> lastFridayOfMonth<span class="br0">&#40;</span>currentDate<span class="br0">&#41;</span><span class="sy0">;</span>
   gantt.<span class="me1">setWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>hours<span class="sy0">:</span><span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="sy0">,</span> <span class="st0">&quot;13:00-15:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> date<span class="sy0">:</span> lastFriday<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   currentDate <span class="sy0">=</span> gantt.<span class="me1">date</span>.<span class="me1">add</span><span class="br0">&#40;</span>currentDate<span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="st0">&quot;month&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h3 id="color_dayoff_times">Coloring the day-off times</h3>

<p>To color the day-off times in the chart area, use the <a class="link-" href="api__gantt_timeline_cell_class_template.html">timeline_cell_class</a> template:</p>

<pre><code><pre class="js">gantt.<span class="me1">templates</span>.<span class="me1">timeline_cell_class</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="sy0">,</span> date<span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>gantt.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>task<span class="sy0">:</span>task<span class="sy0">,</span> date<span class="sy0">:</span> date<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="st0">&quot;week_end&quot;</span><span class="sy0">;</span>
    <span class="kw1">return</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></code></pre>

<p><a href='samples/09_worktime/04_custom_workday_duration.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Custom working days and time</a></p>

<p>Learn more in the <a class="link-" href="desktop__highlighting_time_slots.html">Highlighting  Time Slots</a> article.</p>

<div class='note'><p><p>To hide the day-off time, use the technique described in the article - <a class="link-pro" href="desktop__custom_scale.html">Hiding Time Units in the Scale</a>.</p>
</p></div>

<a name='multipleworktimecalendars'><h2>Multiple Work Time Calendars</h2></a>

<p>In addition to global working time settings, Gantt allows creating multiple work time calendars. You can assign them to individual tasks or groups of tasks.</p>

<h3 id="createcalendar">Creating a working calendar</h3>

<p>A new calendar instance can be created using the <a class="link-" href="api__gantt_createcalendar.html">createCalendar</a> method.</p>

<p>This method presupposes two possible options:</p>

<ul>
<li>when called without parameters, it creates a full-time calendar: 24 working hours per day, 7 days per week </li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> calendar <span class="sy0">=</span> gantt.<span class="me1">createCalendar</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>if you have a ready calendar and want to reuse it for making a new one with different options, you can pass your calendar as a parameter 
to the <a class="link-" href="api__gantt_createcalendar.html">createCalendar</a> method</li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> newCalendar <span class="sy0">=</span> gantt.<span class="me1">createCalendar</span><span class="br0">&#40;</span>calendar<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>The calendar object is initially detached from Gantt and won't take any effect until you add it into Gantt.</p>

<h3 id="addcalendar">Adding a working calendar into Gantt</h3>

<p>After you've created a calendar, you have to add it into Gantt with the help of the <a class="link-" href="api__gantt_addcalendar.html">addCalendar</a> method. Once again, there are two possibilities:</p>

<ul>
<li>add an existing calendar configuration </li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> calendarId <span class="sy0">=</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span>calendar<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>set a new calendar config, which includes the calendar id and the <strong>worktime</strong> object with working days and hours:</li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> calendarId <span class="sy0">=</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    id<span class="sy0">:</span><span class="st0">&quot;custom&quot;</span><span class="sy0">,</span> <span class="co1">// optional</span>
    worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
        hours<span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-17:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span>
        days<span class="sy0">:</span> <span class="br0">&#91;</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<div class='note'><p><p>You can also use this option for creating a calendar.</p>
</p></div>

<h3 id="getcalendars">Getting Calendars</h3>

<p>You can get the objects of working calendars to work with them later on. There are several available options which are described below.</p>

<h4 id="getglobalcalendar">Getting the global Gantt calendar</h4>

<p>To get the object of the global Gantt calendar using the <a class="link-" href="api__gantt_getcalendar.html">getCalendar</a> calendar:</p>

<pre><code><pre class="js"><span class="kw2">var</span> calendar <span class="sy0">=</span> gantt.<span class="me1">getCalendar</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>The <em>calendar</em> object is an instance of the <a class="link-" href="api__gantt_calendar_other.html">calendar</a> interface.</p>

<p>The default calendar instance (global settings) can be accessed by the predefined <strong>"global"</strong> id:</p>

<pre><code><pre class="js"><span class="kw2">var</span> globalSettings <span class="sy0">=</span> gantt.<span class="me1">getCalendar</span><span class="br0">&#40;</span><span class="st0">&quot;global&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>This calendar is used by the <a class="link-" href="desktop__working_time.html#globalsettings">work time methods</a>, when there is no other calendar specified. It is assigned to tasks by default.</p>

<h4 id="gettaskcalendar">Getting the current calendar of a task</h4>

<p>To get the object of a working calendar assigned to a particular task, apply the <a class="link-" href="api__gantt_gettaskcalendar.html">getTaskCalendar</a> method. You need to pass the task object to the method:</p>

<pre><code><pre class="js"><span class="kw2">var</span> task <span class="sy0">=</span> gantt.<span class="me1">getTask</span><span class="br0">&#40;</span>taskId<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">var</span> calendar <span class="sy0">=</span> gantt.<span class="me1">getTaskCalendar</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span>calendar.<span class="me1">isWorkTime</span><span class="br0">&#40;</span>date<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span><span class="st0">&quot;TaskWorkTime&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p><a href='samples/09_worktime/06_task_calendars.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Task level calendars</a></p>

<p>If work time is disabled in the gantt config, the method will return a 24/7 work time calendar.</p>

<h3 id="globalmethodsforcalendars">Using global methods to access calendars</h3>

<p>The <a class="link-" href="desktop__working_time.html#globalsettings">work time methods</a> of the Gantt object can be used to calculate the time duration of a specific task, without accessing its calendar manually.</p>

<p>In that case methods take an object argument where the related "task" object is passed as one of the properties.</p>

<ul>
<li><a class="link-" href="api__gantt_isworktime.html"><strong>gantt.isWorkTime</strong></a></li>
</ul>

<pre><code><pre class="js"><span class="kw1">if</span> <span class="br0">&#40;</span>gantt.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date<span class="sy0">:</span> date<span class="sy0">,</span> task<span class="sy0">:</span> task<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span><span class="st0">&quot;work time of a task&quot;</span> <span class="sy0">+</span> task.<span class="me1">text</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Which is equal to:</p>

<pre><code><pre class="js"><span class="kw2">var</span> calendar <span class="sy0">=</span> gantt.<span class="me1">getTaskCalendar</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span>calendar.<span class="me1">isWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date<span class="sy0">:</span> date<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span><span class="st0">&quot;work time of a task&quot;</span> <span class="sy0">+</span> task.<span class="me1">text</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<ul>
<li><a class="link-" href="api__gantt_calculateenddate.html"><strong>gantt.calculateEndDate</strong></a></li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> end_date <span class="sy0">=</span> gantt.<span class="me1">calculateEndDate</span><span class="br0">&#40;</span><span class="br0">&#123;</span>start_date<span class="sy0">:</span>date<span class="sy0">,</span> duration<span class="sy0">:</span>duration<span class="sy0">,</span> task<span class="sy0">:</span>task<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// or</span>
<span class="kw2">var</span> end_date <span class="sy0">=</span> gantt.<span class="me1">calculateEndDate</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li><a class="link-" href="api__gantt_calculateduration.html"><strong>gantt.calculateDuration</strong></a></li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> duration <span class="sy0">=</span> gantt.<span class="me1">calculateDuration</span><span class="br0">&#40;</span><span class="br0">&#123;</span>start_date<span class="sy0">:</span>start<span class="sy0">,</span> end_date<span class="sy0">:</span>end<span class="sy0">,</span> task<span class="sy0">:</span>task<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// or</span>
<span class="kw2">var</span> duration <span class="sy0">=</span> gantt.<span class="me1">calculateDuration</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li><a class="link-" href="api__gantt_getclosestworktime.html"><strong>gantt.getClosestWorkTime</strong></a></li>
</ul>

<pre><code><pre class="js"><span class="kw2">var</span> closestTime <span class="sy0">=</span> gantt.<span class="me1">getClosestWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>date<span class="sy0">:</span> date<span class="sy0">,</span> task<span class="sy0">:</span>task<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<h3 id="getallcalendars">Getting all Gantt calendars</h3>

<p>To get all the calendars added into Gantt (both the global one and those assigned to separate tasks), make use of the <a class="link-" href="api__gantt_getcalendars.html">getCalendars</a> method:</p>

<pre><code><pre class="js"><span class="kw2">var</span> calendars <span class="sy0">=</span> gantt.<span class="me1">getCalendars</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>The method returns an array of <a class="link-" href="api__gantt_calendar_other.html">Calendar interface</a> objects.</p>

<h3 id="deletecalendar">Deleting calendars</h3>

<p>In case, you don't need a calendar anymore, you can easily remove it via the <a class="link-" href="api__gantt_deletecalendar.html">deleteCalendar</a> method.
You should pass the calendar id to this method:</p>

<pre><code><pre class="js"><span class="co1">// adding a calendar</span>
gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    id<span class="sy0">:</span><span class="st0">&quot;custom&quot;</span><span class="sy0">,</span>
    worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
        hours<span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-17:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span>
        days<span class="sy0">:</span> <span class="br0">&#91;</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// deleting a calendar</span>
gantt.<span class="me1">deleteCalendar</span><span class="br0">&#40;</span><span class="st0">&quot;custom&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<a name='assigningcalendartotask'><h2>Assigning Calendar to Task</h2></a>

<p>To assign a working calendar to a task, you need to set the calendar id and the <strong>worktime</strong> object with working days and hours:</p>

<pre><code><pre class="js">gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    id<span class="sy0">:</span><span class="st0">&quot;custom&quot;</span><span class="sy0">,</span> <span class="co1">// optional</span>
    worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
        hours<span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-17:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span>
        days<span class="sy0">:</span> <span class="br0">&#91;</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>and then set the id of the calendar as a value of the <strong>"calendar_id"</strong> attribute in the task object:</p>

<pre><code><pre class="js"><span class="br0">&#123;</span> 
  <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">2</span><span class="sy0">,</span> <span class="st0">&quot;calendar_id&quot;</span><span class="sy0">:</span><span class="st0">&quot;custom&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;02-04-2019&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;8&quot;</span><span class="sy0">,</span> <span class="st0">&quot;parent&quot;</span><span class="sy0">:</span><span class="st0">&quot;1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;progress&quot;</span><span class="sy0">:</span><span class="nu0">0.5</span><span class="sy0">,</span> <span class="st0">&quot;open&quot;</span><span class="sy0">:</span> <span class="kw2">true</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>You can modify the name of the task property responsible for binding a calendar to a task via the <a class="link-" href="api__gantt_calendar_property_config.html">calendar_property</a> configuration option:</p>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">calendar_property</span> <span class="sy0">=</span> <span class="st0">&quot;property_name&quot;</span><span class="sy0">;</span></pre></code></pre>

<p><a href='samples/09_worktime/06_task_calendars.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Task level calendars</a></p>

<a name='assigningcalendartoresource'><h2>Assigning Calendar to Resource</h2></a>

<div class='pronote'><p><p>This functionality is available in the PRO edition only.</p>
</p></div>

<p>It is also possible to assign a particular working calendar to tasks that require specific resources (people, appliances, etc.).</p>

<p>For example, you can set individual calendars for tasks, depending on a user a task is assigned to. The order of your actions will be as follows:</p>

<ul>
<li>define the property of a task object that will store a resource id via the <a class="link-pro" href="api__gantt_resource_property_config.html">resource_property</a> configuration attribute. In the example below the property named <strong>user</strong> will store ids of users:</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">resource_property</span> <span class="sy0">=</span> <span class="st0">&quot;user&quot;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>use the <a class="link-pro" href="api__gantt_resource_calendars_config.html">resource_calendars</a> configuration option to add the desired calendar for each user and group calendars into one object.</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">resource_calendars</span> <span class="sy0">=</span> <span class="br0">&#123;</span>
    <span class="nu0">1</span> <span class="sy0">:</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
            days<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#93;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="nu0">2</span> <span class="sy0">:</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
            days<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#93;</span>
        <span class="br0">&#125;</span>   
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="nu0">3</span> <span class="sy0">:</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
            days<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#93;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></code></pre>

<p>The object includes a set of <em>key:value</em> pairs, where key is the id of the resource and value corresponds to the 
id of the calendars returned by the <a class="link-" href="api__gantt_addcalendar.html">addCalendar</a> method.</p>

<ul>
<li>specify the <strong>user</strong> attribute in task config objects. 
As a value of this attribute, use the key of the necessary calendar from the object defined in the <strong>resource_calendars</strong> configuration option:</li>
</ul>

<pre><code><pre class="js"><span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">1</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Project #2&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;01-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;5&quot;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
<span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">2</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;0&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;02-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;2&quot;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
<span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">3</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;2&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #2&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;11-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;4&quot;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
<span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">4</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;3&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #3&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;13-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;3&quot;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
<span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">5</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;0&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #1.1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;02-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;7&quot;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
<span class="br0">&#123;</span> <span class="st0">&quot;id&quot;</span><span class="sy0">:</span><span class="nu0">6</span><span class="sy0">,</span> <span class="st0">&quot;user&quot;</span><span class="sy0">:</span><span class="st0">&quot;1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;text&quot;</span><span class="sy0">:</span><span class="st0">&quot;Task #1.2&quot;</span><span class="sy0">,</span> <span class="st0">&quot;start_date&quot;</span><span class="sy0">:</span><span class="st0">&quot;03-04-2019&quot;</span><span class="sy0">,</span> <span class="st0">&quot;duration&quot;</span><span class="sy0">:</span><span class="st0">&quot;7&quot;</span> <span class="br0">&#125;</span></pre></code></pre>

<p><a href='samples/09_worktime/07_resource_calendars.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Resource level calendars</a></p>

<div class='note'><p><p>Note that when a task has both a custom and a resource calendars, the custom calendar has a higher priority and overrides the resource calendar settings.</p>
</p></div>

<h3 id="mergingcalendars">Merging multiple calendars</h3>

<p>Starting from v7.0, it is possible to merge multiple calendars into one. <br>
For example, you want to set two or more resources with different working calendars for the same task. The working hours of the first one are from 9:00 to 15:00 while the working time of another is from 12:00 to 17:00.  As a result of their merging, you'll get one calendar with working hours from 12:00 to 15:00.</p>

<p>Setting the <a class="link-pro" href="api__gantt_dynamic_resource_calendars_config.html">dynamic_resource_calendars</a> config to <em>true</em> will enable this feature automatically:</p>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">dynamic_resource_calendars</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span></pre></code></pre>

<p><a href='samples/09_worktime/10_merge_calendars.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Merge work Calendars of different resources</a></p>

<p>But you can also merge calendars manually with the help of the <a class="link-" href="api__gantt_mergecalendars.html">mergeCalendars</a> method:</p>

<pre><code><pre class="js"><span class="kw2">const</span> johnCalendarId <span class="sy0">=</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
        hours<span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;0:00-24:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span>
        days<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">const</span> mikeCalendarId <span class="sy0">=</span> gantt.<span class="me1">addCalendar</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    worktime<span class="sy0">:</span> <span class="br0">&#123;</span>
        hours<span class="sy0">:</span> <span class="br0">&#91;</span><span class="st0">&quot;8:00-12:00&quot;</span><span class="sy0">,</span> <span class="st0">&quot;13:00-17:00&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span>
        days<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">const</span> joinedCalendar <span class="sy0">=</span> gantt.<span class="me1">mergeCalendars</span><span class="br0">&#40;</span>
    gantt.<span class="me1">getCalendar</span><span class="br0">&#40;</span>mikeCalendarId<span class="br0">&#41;</span><span class="sy0">,</span>
    gantt.<span class="me1">getCalendar</span><span class="br0">&#40;</span>johnCalendarId<span class="br0">&#41;</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<a name='assigningcalendartoproject'><h2>Assigning Calendar to Project</h2></a>

<div class='pronote'><p><p>This functionality is available in the PRO edition only.</p>
</p></div>

<p>There is a possibility to specify a working calendar not only for a particular task or resource, but for a project, so that tasks could inherit the same calendar that their parent project is assigned to.</p>

<p>The logic of inheriting a calendar by a task is the following:</p>

<ul>
<li>If a user assigns a calendar to a subproject with tasks, all its tasks will use this calendar. </li>
<li>If a task has a personal calendar assigned to it, it will use its calendar and not the calendar of its parent project.</li>
</ul>

<p>To enable this functionality, you need to set the <a class="link-pro" href="api__gantt_inherit_calendar_config.html">inherit_calendar</a> configuration option to <em>true</em>. By default this option is disabled.</p>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">inherit_calendar</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li>If <em>true</em>, tasks that have no calendar assigned to them, will use the calendar assigned to their summary parent (which can get a calendar from its parent in its turn).</li>
<li>If <em>false</em>, tasks that have no calendar assigned to them, will use the global calendar.</li>
</ul>

<p>In the example below tasks inherit calendars from their parent projects by default. In case a task has a different calendar assigned, this calendar will be used instead. Thus, tasks #2.2 and #3 use the "Full week" 
calendars unlike their parent projects:</p>

<p><img src="media/desktop/working_calendar_project.png" alt="Working calendar for project" /></p>

<p><a href='samples/09_worktime/08_project_calendars.html' target='blank'><span class='sample'>Related sample: </span>&nbsp;Project level calendars</a></p>

<a name='changingcalendardynamically'><h2>Changing Calendar Dynamically</h2></a>

<p>Starting from v7.0, Gantt picks up the change of a task calendar  and recalculates  time of tasks automatically.</p>

<p>However, you can update the task schedule manually when its calendar changes.
For example, a calendar can be changed from lightbox:</p>

<pre><code><pre class="js"><span class="kw2">function</span> updateTaskTiming<span class="br0">&#40;</span>task<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  task.<span class="me1">start_date</span> <span class="sy0">=</span> gantt.<span class="me1">getClosestWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
     dir<span class="sy0">:</span> <span class="st0">&quot;future&quot;</span><span class="sy0">,</span>
     date<span class="sy0">:</span> task.<span class="me1">start_date</span><span class="sy0">,</span>
     unit<span class="sy0">:</span> gantt.<span class="me1">config</span>.<span class="me1">duration_unit</span><span class="sy0">,</span>
     task<span class="sy0">:</span> task
  <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  task.<span class="me1">end_date</span> <span class="sy0">=</span> gantt.<span class="me1">calculateEndDate</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
gantt.<span class="me1">attachEvent</span><span class="br0">&#40;</span><span class="st0">&quot;onLightboxSave&quot;</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span>id<span class="sy0">,</span> task<span class="sy0">,</span> is_new<span class="br0">&#41;</span><span class="br0">&#123;</span>
  updateTaskTiming<span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>Or, you can define recalculation of all tasks on demand:</p>

<pre><code><pre class="js">gantt.<span class="me1">batchUpdate</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
  gantt.<span class="me1">eachTask</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="br0">&#123;</span>
    task.<span class="me1">start_date</span> <span class="sy0">=</span> gantt.<span class="me1">getClosestWorkTime</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
      dir<span class="sy0">:</span> <span class="st0">&quot;future&quot;</span><span class="sy0">,</span>
      date<span class="sy0">:</span> task.<span class="me1">start_date</span><span class="sy0">,</span>
      unit<span class="sy0">:</span> gantt.<span class="me1">config</span>.<span class="me1">duration_unit</span><span class="sy0">,</span>
      task<span class="sy0">:</span> task
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    task.<span class="me1">end_date</span> <span class="sy0">=</span> gantt.<span class="me1">calculateEndDate</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
    gantt.<span class="me1">updateTask</span><span class="br0">&#40;</span>task.<span class="me1">id</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<!-- Content Area End -->
			<a href='desktop__working_time.html#top' class='top_link'>Back to top</a>
			<div id='disqus_thread'></div><script type='text/javascript'>var disqus_shortname = 'dhxdocumentation';var disqus_developer = 1;(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script>
		</div>
		</div>
	</div>
	<div class="footer">
		<div class='content'>
			<ul class='column'>
	<li class='group'>Tasks</li>
	<li><a href='desktop__loading_storing_data.html'>Loading</a></li>
	<li><a href='desktop__task_bars.html'>Operations</a></li>
	<li><a href='desktop__styling.html'>Look &amp; Feel</a></li>
</ul>

<ul class='column'>
	<li class='group'>Configuration</li>
	<li><a href='desktop__table.html'>Grid</a></li>
	<li><a href='desktop__time_scale.html'>Scales</a></li>
	<li><a href='desktop__edit_form.html'>Lightbox</a></li>
	<li><a href='desktop__dependencies.html'>Links</a></li>
</ul>

<ul class='column'>
	<li class='group'>PRO Edition</li>
	<li><a href='desktop__critical_path.html'>Critical Path</a></li>
	<li><a href='desktop__milestones.html'>Milestones</a></li>
	<li><a href='desktop__baselines.html'>Baselines</a></li>
</ul>

<ul class='column'>
	<li class='group'>Other Components</li>
	<li><a href='../suite/index.html'>Suite</a></li>
	<li><a href='../scheduler/index.html'>Scheduler</a></li>
	<li><a href='../pivot/index.html'>Pivot</a></li>	
	<li><a href='http://scheduler-net.com/'>Scheduler .Net</a></li>
</ul>

<ul class='column'>
	<li class='group'>API</li>
	<li><a href='api__refs__gantt_events.html'>Events</a></li>
	<li><a href='api__refs__gantt_methods.html'>Methods</a></li>
	<li><a href='api__refs__gantt_props.html'>Properties</a></li>
	<li><a href='api__refs__gantt_templates.html'>Templates</a></li>
</ul>

		</div>
	</div>
	<script src="assets/autocomplete.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		AutoComplete_init("");
		Scroll_init();
	</script>	
</body>
</html>