<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="assets/docs-v=1599487766.css">
		<link rel="stylesheet" type="text/css" href="assets/theme-v=1599487766.css">
		<link rel="search" type="application/opensearchdescription+xml" title="Gantt Docs" href="https://docs.dhtmlx.com/gantt/assets/opensearch.xml">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale = 1.0" />
		<meta name="description" content="" />
		<link href="assets/favicon.ico" rel="shortcut icon" />
		<!--[if lte IE 9]>
			<link rel="stylesheet" type="text/css" href="assets/ie.css" />
		<![endif]-->
		<!-- stub -->
		<title>addTaskLayer  Gantt Docs</title>
	</head>
<body class="page_">
	<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5M5RCSJ');</script><!-- End Google Tag Manager -->
	<a name="top"></a>
	
	<div class='headerBox'>
	<div class="header">
		<div class='content'>
			<a href='https://dhtmlx.com' class='top_logo'></a>
			<div class='top_menu'>
				<a href="samples/index.html">Samples</a>
				<a href="https://forum.dhtmlx.com/viewforum.php?f=15">Forum</a>
				<a href="https://dhtmlx.com/docs/technical-support.shtml">Support</a>
			</div>
			<span><a href='index.html' style="color:white">Documentation</a></span>
		</div>
	</div>
	</div>

	<div class="body">
		<div class="content">
		<div class="navigation">
			<div id="doc_navigation">
			<div class="search">
				<form method="get" action="search.php">
					<input type="text" accesskey="f" name="query" placeholder="Search the docs..." value="" autocomplete="off">
						<button type="submit"><img src="assets/common/search_icon.png"/></button>
				</form>
			</div>
			<ul><li class=""><a href="api__gantt_promise.html">Promise</a></li><li class=""><a href="api__gantt_addcalendar.html">addCalendar</a></li><li class=""><a href="api__gantt_addlink.html">addLink</a></li><li class="toc-pro"><a href="api__gantt_addlinklayer.html">addLinkLayer</a></li><li class=""><a href="api__gantt_addmarker.html">addMarker</a></li><li class=""><a href="api__gantt_addshortcut.html">addShortcut</a></li><li class=""><a href="api__gantt_addtask.html">addTask</a></li><li class="toc-pro current"><a href="api__gantt_addtasklayer.html">addTaskLayer</a></li><ul><li class="inner"><a href="api__gantt_addtasklayer.html#smartrenderingforcustomlayers">Smart rendering for custom layers</a></li></ul><li class=""><a href="api__gantt_alert.html">alert</a></li><li class=""><a href="api__gantt_assert.html">assert</a></li><li class=""><a href="api__gantt_attachevent.html">attachEvent</a></li><li class="toc-pro"><a href="api__gantt_autoschedule.html">autoSchedule</a></li><li class=""><a href="api__gantt_batchupdate.html">batchUpdate</a></li><li class=""><a href="api__gantt_bind.html">bind</a></li><li class=""><a href="api__gantt_calculateduration.html">calculateDuration</a></li><li class=""><a href="api__gantt_calculateenddate.html">calculateEndDate</a></li><li class=""><a href="api__gantt_calculatetasklevel.html">calculateTaskLevel</a></li><li class=""><a href="api__gantt_callevent.html">callEvent</a></li><li class=""><a href="api__gantt_changelightboxtype.html">changeLightboxType</a></li><li class=""><a href="api__gantt_changelinkid.html">changeLinkId</a></li><li class=""><a href="api__gantt_changetaskid.html">changeTaskId</a></li><li class=""><a href="api__gantt_checkevent.html">checkEvent</a></li><li class=""><a href="api__gantt_clearall.html">clearAll</a></li><li class=""><a href="api__gantt_clearredostack.html">clearRedoStack</a></li><li class=""><a href="api__gantt_clearundostack.html">clearUndoStack</a></li><li class=""><a href="api__gantt_close.html">close</a></li><li class=""><a href="api__gantt_collapse.html">collapse</a></li><li class=""><a href="api__gantt_columnindexbydate.html">columnIndexByDate</a></li><li class=""><a href="api__gantt_confirm.html">confirm</a></li><li class=""><a href="api__gantt_copy.html">copy</a></li><li class=""><a href="api__gantt_correcttaskworktime.html">correctTaskWorkTime</a></li><li class=""><a href="api__gantt_createcalendar.html">createCalendar</a></li><li class=""><a href="api__gantt_createdataprocessor.html">createDataProcessor</a></li><li class=""><a href="api__gantt_createdatastore.html">createDatastore</a></li><li class=""><a href="api__gantt_createtask.html">createTask</a></li><li class=""><a href="api__gantt_dataprocessor.html">dataProcessor</a></li><li class=""><a href="api__gantt_datefrompos.html">dateFromPos</a></li><li class=""><a href="api__gantt_defined.html">defined</a></li><li class=""><a href="api__gantt_deletecalendar.html">deleteCalendar</a></li><li class=""><a href="api__gantt_deletelink.html">deleteLink</a></li><li class=""><a href="api__gantt_deletemarker.html">deleteMarker</a></li><li class=""><a href="api__gantt_deletetask.html">deleteTask</a></li><li class=""><a href="api__gantt_destructor.html">destructor</a></li><li class="toc-deprecated"><a href="api__gantt_detachallevents.html">detachAllEvents</a></li><li class=""><a href="api__gantt_detachevent.html">detachEvent</a></li><li class=""><a href="api__gantt_eachparent.html">eachParent</a></li><li class=""><a href="api__gantt_eachselectedtask.html">eachSelectedTask</a></li><li class=""><a href="api__gantt_eachtask.html">eachTask</a></li><li class=""><a href="api__gantt_event.html">event</a></li><li class=""><a href="api__gantt_eventremove.html">eventRemove</a></li><li class=""><a href="api__gantt_expand.html">expand</a></li><li class=""><a href="api__gantt_exporttoexcel.html">exportToExcel</a></li><li class=""><a href="api__gantt_exporttoical.html">exportToICal</a></li><li class=""><a href="api__gantt_exporttojson.html">exportToJSON</a></li><li class=""><a href="api__gantt_exporttomsproject.html">exportToMSProject</a></li><li class=""><a href="api__gantt_exporttopdf.html">exportToPDF</a></li><li class=""><a href="api__gantt_exporttopng.html">exportToPNG</a></li><li class=""><a href="api__gantt_exporttoprimaverap6.html">exportToPrimaveraP6</a></li><li class="toc-pro"><a href="api__gantt_findcycles.html">findCycles</a></li><li class=""><a href="api__gantt_focus.html">focus</a></li><li class=""><a href="api__gantt_getcalendar.html">getCalendar</a></li><li class=""><a href="api__gantt_getcalendars.html">getCalendars</a></li><li class=""><a href="api__gantt_getchildren.html">getChildren</a></li><li class=""><a href="api__gantt_getclosestworktime.html">getClosestWorkTime</a></li><li class=""><a href="api__gantt_getcolumnindex.html">getColumnIndex</a></li><li class=""><a href="api__gantt_getconnectedgroup.html">getConnectedGroup</a></li><li class=""><a href="api__gantt_getconstraintlimitations.html">getConstraintLimitations</a></li><li class=""><a href="api__gantt_getconstrainttype.html">getConstraintType</a></li><li class=""><a href="api__gantt_getdatastore.html">getDatastore</a></li><li class="toc-pro"><a href="api__gantt_getfreeslack.html">getFreeSlack</a></li><li class=""><a href="api__gantt_getglobaltaskindex.html">getGlobalTaskIndex</a></li><li class="toc-pro"><a href="api__gantt_getgridcolumn.html">getGridColumn</a></li><li class=""><a href="api__gantt_getgridcolumns.html">getGridColumns</a></li><li class=""><a href="api__gantt_getlabel.html">getLabel</a></li><li class=""><a href="api__gantt_getlastselectedtask.html">getLastSelectedTask</a></li><li class=""><a href="api__gantt_getlightbox.html">getLightbox</a></li><li class=""><a href="api__gantt_getlightboxsection.html">getLightboxSection</a></li><li class=""><a href="api__gantt_getlightboxtype.html">getLightboxType</a></li><li class=""><a href="api__gantt_getlightboxvalues.html">getLightboxValues</a></li><li class=""><a href="api__gantt_getlink.html">getLink</a></li><li class=""><a href="api__gantt_getlinkcount.html">getLinkCount</a></li><li class=""><a href="api__gantt_getlinknode.html">getLinkNode</a></li><li class=""><a href="api__gantt_getlinks.html">getLinks</a></li><li class=""><a href="api__gantt_getmarker.html">getMarker</a></li><li class=""><a href="api__gantt_getnext.html">getNext</a></li><li class=""><a href="api__gantt_getnextsibling.html">getNextSibling</a></li><li class=""><a href="api__gantt_getparent.html">getParent</a></li><li class=""><a href="api__gantt_getprev.html">getPrev</a></li><li class=""><a href="api__gantt_getprevsibling.html">getPrevSibling</a></li><li class=""><a href="api__gantt_getredostack.html">getRedoStack</a></li><li class=""><a href="api__gantt_getresourceassignments.html">getResourceAssignments</a></li><li class=""><a href="api__gantt_getresourcecalendar.html">getResourceCalendar</a></li><li class=""><a href="api__gantt_getscale.html">getScale</a></li><li class=""><a href="api__gantt_getscrollstate.html">getScrollState</a></li><li class=""><a href="api__gantt_getselectedid.html">getSelectedId</a></li><li class=""><a href="api__gantt_getselectedtasks.html">getSelectedTasks</a></li><li class=""><a href="api__gantt_getshortcuthandler.html">getShortcutHandler</a></li><li class=""><a href="api__gantt_getsiblings.html">getSiblings</a></li><li class="toc-deprecated"><a href="api__gantt_getslack.html">getSlack</a></li><li class=""><a href="api__gantt_getstate.html">getState</a></li><li class=""><a href="api__gantt_getsubtaskdates.html">getSubtaskDates</a></li><li class=""><a href="api__gantt_getsubtaskduration.html">getSubtaskDuration</a></li><li class=""><a href="api__gantt_gettask.html">getTask</a></li><li class=""><a href="api__gantt_gettaskby.html">getTaskBy</a></li><li class=""><a href="api__gantt_gettaskbyindex.html">getTaskByIndex</a></li><li class=""><a href="api__gantt_gettaskbytime.html">getTaskByTime</a></li><li class=""><a href="api__gantt_gettaskbywbscode.html">getTaskByWBSCode</a></li><li class=""><a href="api__gantt_gettaskcalendar.html">getTaskCalendar</a></li><li class=""><a href="api__gantt_gettaskcount.html">getTaskCount</a></li><li class=""><a href="api__gantt_gettaskheight.html">getTaskHeight</a></li><li class=""><a href="api__gantt_gettaskindex.html">getTaskIndex</a></li><li class=""><a href="api__gantt_gettasknode.html">getTaskNode</a></li><li class=""><a href="api__gantt_gettaskposition.html">getTaskPosition</a></li><li class=""><a href="api__gantt_gettaskrownode.html">getTaskRowNode</a></li><li class=""><a href="api__gantt_gettasktop.html">getTaskTop</a></li><li class=""><a href="api__gantt_gettasktype.html">getTaskType</a></li><li class="toc-pro"><a href="api__gantt_gettotalslack.html">getTotalSlack</a></li><li class=""><a href="api__gantt_getundostack.html">getUndoStack</a></li><li class=""><a href="api__gantt_getvisibletaskcount.html">getVisibleTaskCount</a></li><li class=""><a href="api__gantt_getwbscode.html">getWBSCode</a></li><li class=""><a href="api__gantt_getworkhours.html">getWorkHours</a></li><li class="toc-pro"><a href="api__gantt_groupby.html">groupBy</a></li><li class=""><a href="api__gantt_haschild.html">hasChild</a></li><li class=""><a href="api__gantt_hidecover.html">hideCover</a></li><li class=""><a href="api__gantt_hidelightbox.html">hideLightbox</a></li><li class=""><a href="api__gantt_hidequickinfo.html">hideQuickInfo</a></li><li class=""><a href="api__gantt_importfromexcel.html">importFromExcel</a></li><li class=""><a href="api__gantt_importfrommsproject.html">importFromMSProject</a></li><li class=""><a href="api__gantt_importfromprimaverap6.html">importFromPrimaveraP6</a></li><li class=""><a href="api__gantt_init.html">init</a></li><li class=""><a href="api__gantt_ischildof.html">isChildOf</a></li><li class="toc-pro"><a href="api__gantt_iscircularlink.html">isCircularLink</a></li><li class="toc-pro"><a href="api__gantt_iscriticallink.html">isCriticalLink</a></li><li class="toc-pro"><a href="api__gantt_iscriticaltask.html">isCriticalTask</a></li><li class=""><a href="api__gantt_islinkallowed.html">isLinkAllowed</a></li><li class=""><a href="api__gantt_islinkexists.html">isLinkExists</a></li><li class=""><a href="api__gantt_isreadonly.html">isReadonly</a></li><li class=""><a href="api__gantt_isselectedtask.html">isSelectedTask</a></li><li class="toc-pro"><a href="api__gantt_issplittask.html">isSplitTask</a></li><li class="toc-pro"><a href="api__gantt_issummarytask.html">isSummaryTask</a></li><li class=""><a href="api__gantt_istaskexists.html">isTaskExists</a></li><li class=""><a href="api__gantt_istaskvisible.html">isTaskVisible</a></li><li class=""><a href="api__gantt_isunscheduledtask.html">isUnscheduledTask</a></li><li class=""><a href="api__gantt_isworktime.html">isWorkTime</a></li><li class=""><a href="api__gantt_load.html">load</a></li><li class=""><a href="api__gantt_locate.html">locate</a></li><li class=""><a href="api__gantt_mergecalendars.html">mergeCalendars</a></li><li class=""><a href="api__gantt_message.html">message</a></li><li class=""><a href="api__gantt_mixin.html">mixin</a></li><li class=""><a href="api__gantt_modalbox.html">modalbox</a></li><li class=""><a href="api__gantt_movetask.html">moveTask</a></li><li class=""><a href="api__gantt_open.html">open</a></li><li class=""><a href="api__gantt_parse.html">parse</a></li><li class=""><a href="api__gantt_plugins.html">plugins</a></li><li class=""><a href="api__gantt_posfromdate.html">posFromDate</a></li><li class=""><a href="api__gantt_redo.html">redo</a></li><li class=""><a href="api__gantt_refreshdata.html">refreshData</a></li><li class=""><a href="api__gantt_refreshlink.html">refreshLink</a></li><li class=""><a href="api__gantt_refreshtask.html">refreshTask</a></li><li class="toc-pro"><a href="api__gantt_removelinklayer.html">removeLinkLayer</a></li><li class=""><a href="api__gantt_removeshortcut.html">removeShortcut</a></li><li class="toc-pro"><a href="api__gantt_removetasklayer.html">removeTaskLayer</a></li><li class=""><a href="api__gantt_render.html">render</a></li><li class=""><a href="api__gantt_rendermarkers.html">renderMarkers</a></li><li class=""><a href="api__gantt_resetlayout.html">resetLayout</a></li><li class=""><a href="api__gantt_resetlightbox.html">resetLightbox</a></li><li class="toc-pro"><a href="api__gantt_resetprojectdates.html">resetProjectDates</a></li><li class=""><a href="api__gantt_resetskin.html">resetSkin</a></li><li class=""><a href="api__gantt_resizelightbox.html">resizeLightbox</a></li><li class=""><a href="api__gantt_rounddate.html">roundDate</a></li><li class=""><a href="api__gantt_roundtaskdates.html">roundTaskDates</a></li><li class=""><a href="api__gantt_scrollto.html">scrollTo</a></li><li class=""><a href="api__gantt_selecttask.html">selectTask</a></li><li class=""><a href="api__gantt_serialize.html">serialize</a></li><li class=""><a href="api__gantt_serverlist.html">serverList</a></li><li class=""><a href="api__gantt_setparent.html">setParent</a></li><li class=""><a href="api__gantt_setsizes.html">setSizes</a></li><li class=""><a href="api__gantt_setworktime.html">setWorkTime</a></li><li class=""><a href="api__gantt_showcover.html">showCover</a></li><li class=""><a href="api__gantt_showdate.html">showDate</a></li><li class=""><a href="api__gantt_showlightbox.html">showLightbox</a></li><li class=""><a href="api__gantt_showquickinfo.html">showQuickInfo</a></li><li class=""><a href="api__gantt_showtask.html">showTask</a></li><li class=""><a href="api__gantt_silent.html">silent</a></li><li class=""><a href="api__gantt_sort.html">sort</a></li><li class=""><a href="api__gantt_toggletaskselection.html">toggleTaskSelection</a></li><li class=""><a href="api__gantt_uid.html">uid</a></li><li class=""><a href="api__gantt_undo.html">undo</a></li><li class=""><a href="api__gantt_unselecttask.html">unselectTask</a></li><li class=""><a href="api__gantt_unsetworktime.html">unsetWorkTime</a></li><li class=""><a href="api__gantt_updatecollection.html">updateCollection</a></li><li class=""><a href="api__gantt_updatelink.html">updateLink</a></li><li class=""><a href="api__gantt_updatemarker.html">updateMarker</a></li><li class=""><a href="api__gantt_updatetask.html">updateTask</a></li></ul>
			</div>
		</div>	  
	  
		<div class='doc' id='doc_content'>
			
			
			<div class='breadcrumb'><a class="n1" href="index.html">Start</a><a class="n2" href="api__refs__gantt.html">Gantt API</a><a class="n3" href="api__refs__gantt_methods.html">Methods</a></div>
<h1>addTaskLayer</h1>
<!-- Content Area -->


<p>displays an additional layer with custom elements for a task in the timeline area</p>



<div class='signature'><em>string</em> <b>addTaskLayer</b>(<em>function|object</em><b> func</b>);</div>




<h4>Parameters</h4><table cellspacing='0' class='apitable t3col'><tr class=''><td class='pname'> func</div><td class='ptype'>function|object</td><td>a render function or a config object</td></tr></table>

<h4>Returns</h4><table cellspacing='0' class='apitable'><td class='ptype'>string</td><td>a DOM element that will be displayed in the layer</td></tr></table>

<p class='promarker'>Available only in <b>PRO Edition</b></p>
<h4>Example</h4><p><pre><code><pre class="js">gantt.<span class="me1">init</span><span class="br0">&#40;</span><span class="st0">&quot;gantt_here&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
gantt.<span class="me1">addTaskLayer</span><span class="br0">&#40;</span><span class="kw2">function</span> draw_deadline<span class="br0">&#40;</span>task<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>task.<span class="me1">deadline</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw2">var</span> el <span class="sy0">=</span> document.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">'div'</span><span class="br0">&#41;</span><span class="sy0">;</span>
        el.<span class="me1">className</span> <span class="sy0">=</span> <span class="st0">'deadline'</span><span class="sy0">;</span>
        <span class="kw2">var</span> sizes <span class="sy0">=</span> gantt.<span class="me1">getTaskPosition</span><span class="br0">&#40;</span>task<span class="sy0">,</span> task.<span class="me1">deadline</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        el.<span class="me1">style</span>.<span class="me1">left</span> <span class="sy0">=</span> sizes.<span class="me1">left</span> <span class="sy0">+</span> <span class="st0">'px'</span><span class="sy0">;</span>
        el.<span class="me1">style</span>.<span class="me1">top</span> <span class="sy0">=</span> sizes.<span class="me1">top</span> <span class="sy0">+</span> <span class="st0">'px'</span><span class="sy0">;</span>
&nbsp;
        el.<span class="me1">setAttribute</span><span class="br0">&#40;</span><span class="st0">'title'</span><span class="sy0">,</span> gantt.<span class="me1">templates</span>.<span class="me1">task_date</span><span class="br0">&#40;</span>task.<span class="me1">deadline</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">return</span> el<span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>
</p>







<h4>Related samples</h4><div><ul><li><a href='samples/04_customization/14_deadline.html' target='blank'>Displaying deadlines</a></li>
<li><a href='samples/04_customization/15_baselines.html' target='blank'>Display project baseline</a></li></ul></div>

<div class='h2'>Details</div><div class='pronote'><p><p>This functionality is available in the PRO edition only.</p>
</p></div>

<ul>
<li>The argument function takes a task's object as a parameter and must return a DOM element that will be displayed in the layer.</li>
<li>The argument can also be an object. In this case, it can have the following properties:

<ul>
<li><strong>renderer</strong> - (<em>function|object</em>)  a function that answers for rendering the layer's elements (mandatory)</li>
<li><strong>container</strong> - (<em>HTMLElement</em>) a layer's container (optional)</li>
<li><strong>topmost</strong> - (<em>boolean</em>) if true, the element will be displayed over the task (optional)</li>
<li><strong>filter</strong> - (<em>function</em>) a function that takes a task object as a parameter. If returns 'false', the 'renderer' function won't be called for a task (optional)</li>
</ul></li>
<li>Beware, custom layers will be reset after the next call of <a class="link-" href="api__gantt_init.html">gantt.init</a></li>
<li>Calling the <a class="link-" href="api__gantt_resetlayout.html">gantt.resetLayout()</a> method will also reset custom layers. In order for custom layers to be displayed on a page, you need to redefine the <strong>gantt.addTaskLayer</strong>  method after calling <a class="link-" href="api__gantt_resetlayout.html">resetLayout</a>.</li>
</ul>

<a name='smartrenderingforcustomlayers'><h2>Smart rendering for custom layers</h2></a>

<p><a class="link-" href="desktop__performance.html#smartrendering">Smart rendering</a> tries to display only those HTML elements that are currently visible to the user and not hidden under horizontal and vertical scroll bars.</p>

<p>However, in the case of <a class="link-pro" href="desktop__baselines.html">custom layers</a>, Gantt doesn't know where custom elements are located, since it's completely up to the implementation of the custom rendering function.</p>

<p>As a solution, smart rendering assumes that a custom element is located in the same row where its related task is. Custom elements are added to the page markup when rows of their related tasks are rendered on the screen. In this mode Gantt doesn't take the position of horizontal scrollbar into consideration, a custom element will be rendered in the markup but won't be visible on the page because of the horizontal scroll.</p>

<p>Most of the time it's good enough, but if you have many layers, you may want to optimize the rendering a bit further by providing Gantt with information on position of custom elements.</p>

<p>To do that, you need to use the <em>object</em> parameter of the <em>addTaskLayer()</em> method, and provide the <strong>renderer</strong>  object with the following methods:</p>

<ul>
<li><strong>render</strong> - a rendering function</li>
<li><strong>getRectangle</strong> - a function that returns an object with the coordinates of custom elements</li>
</ul>

<pre><code><pre class="js">gantt.<span class="me1">addTaskLayer</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    renderer<span class="sy0">:</span> <span class="br0">&#123;</span>
        render<span class="sy0">:</span> <span class="kw2">function</span> <span class="br0">&#40;</span>task<span class="sy0">,</span> timeline<span class="sy0">,</span> viewport<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            ...
            <span class="kw1">return</span>  HTMLElement
        <span class="br0">&#125;</span><span class="sy0">,</span>
        getRectangle<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="sy0">,</span> view<span class="br0">&#41;</span><span class="br0">&#123;</span>
            ....
            <span class="kw1">return</span> <span class="br0">&#123;</span>left<span class="sy0">,</span> top<span class="sy0">,</span> height<span class="sy0">,</span> width<span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<p>The logic of rendering custom elements is the following:</p>

<p>1&#46; When the  position of horizontal scroll is changed, the smart render gets new coordinates of the area visible on the screen at the moment. <br>
2&#46; dhtmlxGantt calls the <strong>getRectangle</strong> function for each task/link to get the exact coordinates of a custom element. <br>
3&#46; If the <strong>getRectangle</strong> function returns null value, the <strong>render</strong> function won't be called and the custom element won't be displayed.<br>
4&#46; If the <strong>getRectangle</strong> function returns an object with the coordinates of a task/link and the received coordinates fall in the current viewport, then the <strong>render</strong> function will be called to display a task/link.<br></p>

<pre><code><pre class="js">gantt.<span class="me1">addTaskLayer</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    renderer<span class="sy0">:</span> <span class="br0">&#123;</span>
      render<span class="sy0">:</span> <span class="kw2">function</span> draw_planned<span class="br0">&#40;</span>task<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>task.<span class="me1">planned_start</span> <span class="sy0">&amp;&amp;</span> task.<span class="me1">planned_end</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
          <span class="kw2">var</span> sizes <span class="sy0">=</span> gantt.<span class="me1">getTaskPosition</span><span class="br0">&#40;</span>task<span class="sy0">,</span>task.<span class="me1">planned_start</span><span class="sy0">,</span>task.<span class="me1">planned_end</span><span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw2">var</span> el <span class="sy0">=</span> document.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">'div'</span><span class="br0">&#41;</span><span class="sy0">;</span>
          el.<span class="me1">className</span> <span class="sy0">=</span> <span class="st0">'baseline'</span><span class="sy0">;</span>
          el.<span class="me1">style</span>.<span class="me1">left</span> <span class="sy0">=</span> sizes.<span class="me1">left</span> <span class="sy0">+</span> <span class="st0">'px'</span><span class="sy0">;</span>
          el.<span class="me1">style</span>.<span class="me1">width</span> <span class="sy0">=</span> sizes.<span class="me1">width</span> <span class="sy0">+</span> <span class="st0">'px'</span><span class="sy0">;</span>
          el.<span class="me1">style</span>.<span class="me1">top</span> <span class="sy0">=</span> sizes.<span class="me1">top</span> <span class="sy0">+</span> gantt.<span class="me1">config</span>.<span class="me1">task_height</span> <span class="sy0">+</span> <span class="nu0">13</span> <span class="sy0">+</span> <span class="st0">'px'</span><span class="sy0">;</span>
          <span class="kw1">return</span> el<span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
      <span class="br0">&#125;</span><span class="sy0">,</span>
      <span class="co1">// define getRectangle in order to hook layer with the smart rendering</span>
      getRectangle<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="sy0">,</span> view<span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> gantt.<span class="me1">getTaskPosition</span><span class="br0">&#40;</span>task<span class="sy0">,</span> task.<span class="me1">planned_start</span><span class="sy0">,</span> task.<span class="me1">planned_end</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<h3>Rendering visible parts of custom elements</h3>

<p>The <strong>renderer</strong> object of the <em>addTaskLayer()</em> method provides a possibility to update the node markup of a custom element and display the visible content in the current viewport via the <strong>update</strong> method:</p>

<pre><code><pre class="js">gantt.<span class="me1">addTaskLayer</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    renderer<span class="sy0">:</span> <span class="br0">&#123;</span>
        render<span class="sy0">:</span> <span class="kw2">function</span> <span class="br0">&#40;</span>task<span class="sy0">,</span> timeline<span class="sy0">,</span> viewport<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            ...
            <span class="kw1">return</span>  HTMLElement
        <span class="br0">&#125;</span><span class="sy0">,</span>
        update<span class="sy0">:</span> <span class="kw2">function</span> <span class="br0">&#40;</span>task<span class="sy0">,</span> node<span class="sy0">,</span> timeline<span class="sy0">,</span> viewport<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            ...
            <span class="co1">// put the currently visible part of the element into node inner html</span>
        <span class="br0">&#125;</span><span class="sy0">,</span>
        getRectangle<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span>task<span class="sy0">,</span> view<span class="br0">&#41;</span><span class="br0">&#123;</span>
            ....
            <span class="kw1">return</span> <span class="br0">&#123;</span>left<span class="sy0">,</span> top<span class="sy0">,</span> height<span class="sy0">,</span> width<span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<ul>
<li><strong>update</strong> - allows updating an inner html of a custom element, i.e. hiding cells that are not visible and displaying the visible ones</li>
</ul>

<p>The <strong>update</strong> method is called after the <a class="link-" href="api__gantt_onganttscroll_event.html">onGanttScroll</a> event is fired. It provides a task node (created by the <strong>render</strong> method initially) and a current viewport.</p>


<div class='h2'>See also</div><div class='apitable'><li><div class='alsogroup'>API</div><div><ul><li><a class="link-" href="api__gantt_gettaskposition.html">getTaskPosition</a></li>
<li><a class="link-pro" href="api__gantt_removetasklayer.html">removeTaskLayer</a></li>
<li><a class="link-pro" href="api__gantt_layer_attribute_config.html">layer_attribute</a></li></ul></div></li><li><div class='alsogroup'>Articles</div><div><ul><li><a class="link-pro" href="desktop__baselines.html">Extra Elements in Timeline Area</a></li></ul></div></li></div>


<!-- Content Area End -->
			<a href='api__gantt_addtasklayer.html#top' class='top_link'>Back to top</a>
			<div id='disqus_thread'></div><script type='text/javascript'>var disqus_shortname = 'dhxdocumentation';var disqus_developer = 1;(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script>
		</div>
		</div>
	</div>
	<div class="footer">
		<div class='content'>
			<ul class='column'>
	<li class='group'>Tasks</li>
	<li><a href='desktop__loading_storing_data.html'>Loading</a></li>
	<li><a href='desktop__task_bars.html'>Operations</a></li>
	<li><a href='desktop__styling.html'>Look &amp; Feel</a></li>
</ul>

<ul class='column'>
	<li class='group'>Configuration</li>
	<li><a href='desktop__table.html'>Grid</a></li>
	<li><a href='desktop__time_scale.html'>Scales</a></li>
	<li><a href='desktop__edit_form.html'>Lightbox</a></li>
	<li><a href='desktop__dependencies.html'>Links</a></li>
</ul>

<ul class='column'>
	<li class='group'>PRO Edition</li>
	<li><a href='desktop__critical_path.html'>Critical Path</a></li>
	<li><a href='desktop__milestones.html'>Milestones</a></li>
	<li><a href='desktop__baselines.html'>Baselines</a></li>
</ul>

<ul class='column'>
	<li class='group'>Other Components</li>
	<li><a href='../suite/index.html'>Suite</a></li>
	<li><a href='../scheduler/index.html'>Scheduler</a></li>
	<li><a href='../pivot/index.html'>Pivot</a></li>	
	<li><a href='http://scheduler-net.com/'>Scheduler .Net</a></li>
</ul>

<ul class='column'>
	<li class='group'>API</li>
	<li><a href='api__refs__gantt_events.html'>Events</a></li>
	<li><a href='api__refs__gantt_methods.html'>Methods</a></li>
	<li><a href='api__refs__gantt_props.html'>Properties</a></li>
	<li><a href='api__refs__gantt_templates.html'>Templates</a></li>
</ul>

		</div>
	</div>
	<script src="assets/autocomplete.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		AutoComplete_init("");
		Scroll_init();
	</script>	
</body>
</html>