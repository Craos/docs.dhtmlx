<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="assets/docs-v=1599487766.css">
		<link rel="stylesheet" type="text/css" href="assets/theme-v=1599487766.css">
		<link rel="search" type="application/opensearchdescription+xml" title="Gantt Docs" href="https://docs.dhtmlx.com/gantt/assets/opensearch.xml">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale = 1.0" />
		<meta name="description" content="" />
		<link href="assets/favicon.ico" rel="shortcut icon" />
		<!--[if lte IE 9]>
			<link rel="stylesheet" type="text/css" href="assets/ie.css" />
		<![endif]-->
		<!-- stub -->
		<title>dhtmlxGantt with ASP.NET Core  Gantt Docs</title>
	</head>
<body class="page_">
	<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5M5RCSJ');</script><!-- End Google Tag Manager -->
	<a name="top"></a>
	
	<div class='headerBox'>
	<div class="header">
		<div class='content'>
			<a href='https://dhtmlx.com' class='top_logo'></a>
			<div class='top_menu'>
				<a href="samples/index.html">Samples</a>
				<a href="https://forum.dhtmlx.com/viewforum.php?f=15">Forum</a>
				<a href="https://dhtmlx.com/docs/technical-support.shtml">Support</a>
			</div>
			<span><a href='index.html' style="color:white">Documentation</a></span>
		</div>
	</div>
	</div>

	<div class="body">
		<div class="content">
		<div class="navigation">
			<div id="doc_navigation">
			<div class="search">
				<form method="get" action="search.php">
					<input type="text" accesskey="f" name="query" placeholder="Search the docs..." value="" autocomplete="off">
						<button type="submit"><img src="assets/common/search_icon.png"/></button>
				</form>
			</div>
			<ul><li class=" current"><a href="desktop__howtostart_dotnet_core.html">dhtmlxGantt with ASP.NET Core</a></li><ul><li class="inner"><a href="desktop__howtostart_dotnet_core.html#step1creatingaproject">Step 1. Creating a project</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#step2addingganttmarkupandjs">Step 2. Adding Gantt markup and JS</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#step3creatingmodelsanddatabase">Step 3. Creating models and database</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#step4implementingwebapi">Step 4. Implementing Web API</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#errorhandling">Error handling</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#storingtheorderoftasks">Storing the order of tasks</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#applicationsecurity">Application security</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#troubleshooting">Trouble shooting</a></li><li class="inner"><a href="desktop__howtostart_dotnet_core.html#whatsnext">What's next</a></li></ul><li class=""><a href="desktop__howtostart_nodejs.html">dhtmlxGantt with Node.js</a></li><li class=""><a href="desktop__howtostart_dotnet.html">dhtmlxGantt with ASP.NET MVC</a></li><li class=""><a href="desktop__howtostart_php_laravel.html">dhtmlxGantt with PHP: Laravel</a></li><li class=""><a href="desktop__howtostart_php_slim4.html">dhtmlxGantt with PHP:Slim</a></li><li class=""><a href="desktop__howtostart_ruby.html">dhtmlxGantt with Ruby on Rails</a></li><li class=""><a href="desktop__howtostart_php.html">dhtmlxGantt with PHP:Slim3</a></li></ul>
			</div>
		</div>	  
	  
		<div class='doc' id='doc_content'>
			
			
			<div class='breadcrumb'><a class="n1" href="index.html">Start</a><a class="n2" href="desktop__guides.html">Guides</a><a class="n3" href="desktop__howtostart_guides.html">How to Start with dhtmlxGantt</a></div>
<!-- Content Area -->



<h1>dhtmlxGantt with ASP.NET Core</h1>

<p>This tutorial gives you step-by-step instructions on how to create Gantt with <a href="https://www.asp.net/">ASP.NET</a> Core 2 on the server side.</p>

<p>You can also read tutorials on other server-side technologies:</p>

<ul>
<li><a class="link-" href="desktop__howtostart_dotnet.html">dhtmlxGantt with ASP.NET MVC</a></li>
<li><a class="link-" href="desktop__howtostart_nodejs.html">dhtmlxGantt with Node.js</a></li>
<li><a class="link-" href="desktop__howtostart_php_laravel.html">dhtmlxGantt with PHP: Laravel</a></li>
<li><a class="link-" href="desktop__howtostart_php_slim4.html">dhtmlxGantt with PHP:Slim</a></li>
<li><a class="link-" href="desktop__howtostart_ruby.html">dhtmlxGantt with Ruby on Rails</a></li>
</ul>

<p>To organize communication with database, the <a href="https://docs.microsoft.com/en-us/ef/core/">Entity Framework Core</a> is used. The application is built with the help of the Visual Studio 2017.</p>

<div class='note'><p><p>The complete source code is <a href="https://github.com/DHTMLX/gantt-howto-dotnet-core">available on GitHub</a>.</p>
</p></div>

<a name='step1creatingaproject'><h2>Step 1. Creating a project</h2></a>

<p>Launch Visual Studio 2017 and create a new project. Open the <strong>File</strong> menu and select: <em>New -> Project</em>.</p>

<p>Next select ASP.NET Core Web Application and name it <em>DHX.Gantt</em>.</p>

<p><img src="media/desktop/create_project_step1.png" alt="dhtmlxGantt with ASP.NET Core 2 creating a project" /></p>

<p>Select an Empty template.</p>

<p><img src="media/desktop/create_project_step2.png" alt="dhtmlxGantt with ASP.NET Core 2 creating a project" /></p>

<p>Thus you've created a project and can proceed to add markup and script for Gantt.</p>

<a name='step2addingganttmarkupandjs'><h2>Step 2. Adding Gantt markup and JS</h2></a>

<p>Go to <strong>wwwroot</strong> and create an <strong>index.html</strong> file.</p>

<p><img src="media/desktop/create_project_step3.png" alt="dhtmlxGantt with ASP.NET Core 2 creating a project" /></p>

<p><img src="media/desktop/create_project_step4.png" alt="dhtmlxGantt with ASP.NET Core 2 creating a project" /></p>

<p>In the newly created file make a simple page for a gantt chart.</p>

<p>Note, that gantt files are added from <a class="link-" href="desktop__install_with_bower.html#cdn">CDN</a> in this demo. If you have a Professional version of the component, 
you'll need to <a class="link-" href="desktop__install_with_bower.html#addingprofessionaleditionintoproject">add gantt files to your project manually</a>.</p>

<p class='snippet'> index.html</p>

<pre><code><pre class="js"><span class="sy0">&lt;!</span>DOCTYPE html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>head<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>meta <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;viewport&quot;</span> content<span class="sy0">=</span><span class="st0">&quot;width=device-width&quot;</span> <span class="sy0">/&gt;</span>
    <span class="sy0">&lt;</span>title<span class="sy0">&gt;</span>Index<span class="sy0">&lt;/</span>title<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>link href<span class="sy0">=</span><span class="st0">&quot;https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css&quot;</span>
          rel<span class="sy0">=</span><span class="st0">&quot;stylesheet&quot;</span> type<span class="sy0">=</span><span class="st0">&quot;text/css&quot;</span> <span class="sy0">/&gt;</span>
    <span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js&quot;</span><span class="sy0">&gt;&lt;/</span>script<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>script<span class="sy0">&gt;</span>
        document.<span class="me1">addEventListener</span><span class="br0">&#40;</span><span class="st0">&quot;DOMContentLoaded&quot;</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span>event<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="co1">// specifying the date format</span>
            gantt.<span class="me1">config</span>.<span class="me1">date_format</span> <span class="sy0">=</span> <span class="st0">&quot;%Y-%m-%d %H:%i&quot;</span><span class="sy0">;</span>
            <span class="co1">// initializing gantt</span>
            gantt.<span class="me1">init</span><span class="br0">&#40;</span><span class="st0">&quot;gantt_here&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            <span class="co1">// initiating data loading</span>
            gantt.<span class="me1">load</span><span class="br0">&#40;</span><span class="st0">&quot;/api/data&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="co1">// initializing dataProcessor</span>
            <span class="kw2">var</span> dp <span class="sy0">=</span> <span class="kw2">new</span> gantt.<span class="me1">dataProcessor</span><span class="br0">&#40;</span><span class="st0">&quot;/api/&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="co1">// and attaching it to gantt</span>
            dp.<span class="me1">init</span><span class="br0">&#40;</span>gantt<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="co1">// setting the REST mode for dataProcessor</span>
            dp.<span class="me1">setTransactionMode</span><span class="br0">&#40;</span><span class="st0">&quot;REST&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="sy0">&lt;/</span>script<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>head<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>body<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>div id<span class="sy0">=</span><span class="st0">&quot;gantt_here&quot;</span> style<span class="sy0">=</span><span class="st0">&quot;width: 100%; height: 100vh;&quot;</span><span class="sy0">&gt;&lt;/</span>div<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>html<span class="sy0">&gt;</span></pre></code></pre>

<p>When the page is loaded, in addition to <a class="link-" href="desktop__initializing_gantt_chart.html">initializing gantt chart</a> <a class="link-" href="desktop__loading.html">data loading</a> is immediately called and the 
<a class="link-" href="desktop__server_side.html#technique"><code>dataProcessor</code></a> is set up, so all changes made to gantt chart by the user will be saved to the backend. The backend isn't implemented yet, so it will make more sense later.</p>

<p>Next go to <strong>Startup.cs</strong> and tell the application to use the <strong>index.html</strong> page. In order to do so, you need to configure the app to serve static files from the <code>wwwroot</code> folder. 
It's done in the <code>Configure</code> method by calling the <code>app.UseStaticFiles()</code> method.
You can find <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/static-files?view=aspnetcore-2.1&tabs=aspnetcore2x">more details here</a>.</p>

<p>We also need to add the required middleware to <strong>Startup.cs</strong>, by replacing the "Hello world" stub in the <code>Configure()</code> method with two highlighted lines of code:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Builder</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Hosting</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Http</span><span class="sy0">;</span>
using Microsoft.<span class="me1">Extensions</span>.<span class="me1">DependencyInjection</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> Startup
    <span class="br0">&#123;</span>
        <span class="co1">// This method gets called by the runtime. </span>
        <span class="co1">// Use this method to add services to the container.</span>
        <span class="co1">// For more information on how to configure your application, </span>
        <span class="co1">// visit https://go.microsoft.com/fwlink/?LinkID=398940</span>
        <span class="kw2">public</span> <span class="kw1">void</span> ConfigureServices<span class="br0">&#40;</span>IServiceCollection services<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// This method gets called by the runtime.</span>
        <span class="co1">// Use this method to configure the HTTP request pipeline.</span>
        <span class="kw2">public</span> <span class="kw1">void</span> Configure<span class="br0">&#40;</span>IApplicationBuilder app<span class="sy0">,</span> IHostingEnvironment env<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>env.<span class="me1">IsDevelopment</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            <span class="br0">&#123;</span>
                app.<span class="me1">UseDeveloperExceptionPage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
&nbsp;
<span class="xtra ln-xtra">            app.<span class="me1">UseDefaultFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </span><span class="xtra ln-xtra">            app.<span class="me1">UseStaticFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  </span>        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>The 2 added middleware are:</p>

<ul>
<li><p><code>app.UseDefaultFiles()</code> – allows serving default files. It will search the <strong>wwwroot</strong> folder for the following files:</p>

<ul>
<li>index.html</li>
<li>index.htm</li>
<li>default.html</li>
<li>default.htm
Thus, you can choose any of them, while in this tutorial "index.html" is used.
<code>UseDefaultFiles()</code> is just an URL-rewriter that doesn't actually serve the file. For this purpose you need to also add the <code>UseStaticFiles()</code> file.</li>
</ul></li>
<li><p><code>app.UseStaticFiles()</code> – is responsible for serving all static files present in the <strong>wwwroot</strong> folder.</p></li>
</ul>

<p>Once you are done with it, an empty gantt should appear on the page when you run the application. Note that the "Invalid data" label at the top right corner shows up because <code>gantt.load()</code> is called,
as there is still no proper backend to serve the data. When the controller will be implemented, gantt will be able to display tasks and links.</p>

<p><img src="media/desktop/adding_gantt_dotnet_core.png" alt="dhtmlxGantt with ASP.NET Core 2 adding Gantt" /></p>

<p>Now the basic part is done and it's time to implement the backend. Let's start with implementing model classes and after that proceed to the WebAPI controller.</p>

<a name='step3creatingmodelsanddatabase'><h2>Step 3. Creating models and database</h2></a>

<p>Let's begin with data models. A data model for Gantt includes <a class="link-" href="desktop__loading.html#standarddatabasestructure">links and tasks</a>. 
dhtmlxGantt uses <a class="link-" href="desktop__supported_data_formats.html#json">non-conventional names for model properties</a> from the .NET world perspective. 
Sometimes the client-side model also contains some properties for the client side or the backend logic, but these properties shouldn't be stored in a database.</p>

<p>To deal with this, the <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/data/using-web-api-with-entity-framework/part-5">Data Transfer Object (DTO)</a> pattern will be used. Two kinds of models will be defined:</p>

<ul>
<li>domain model classes that will be used with EF Core and inside the app</li>
<li>DTO classes that will be used to communicate with Web API.</li>
</ul>

<p>Then mapping between the two models should be implemented.</p>

<h3>Models</h3>

<p>Create a new folder called <strong>Models</strong> in the project folder. This is where model classes and EF context will be implemented.</p>

<h4>Task Model</h4>

<p>First, create a class for Tasks. Create a file in the Models folder and name it <strong>Task.cs</strong>. This can be done by calling the context menu for the Models folder and selecting <em>Add->Class</em>.</p>

<p>This is how the model must look like:</p>

<p class='snippet'> DHX.Gantt/Models/Task.cs</p>

<pre><code><pre class="js">using System<span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> Task
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> int Id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string Text <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> DateTime StartDate <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int Duration <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> decimal Progress <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int<span class="sy0">?</span> ParentId <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string Type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>You can look up <a class="link-" href="desktop__loading.html#task_properties">the list of all properties of the Task object</a>.</p>

<h4>Link Model</h4>

<p>Add one more file and create a class for Links:</p>

<p class='snippet'> DHX.Gantt/Models/Link.cs</p>

<pre><code><pre class="js"><span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> Link
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> int Id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string Type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int SourceTaskId <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int TargetTaskId <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>The models are ready, and you can start configuring the database connection.</p>

<h3>Configuring DataBase Connection</h3>

<p>To configure database connection, you need to take the steps listed below:</p>

<h4>Install Entity Framework Core</h4>

<p>The <a href="https://docs.microsoft.com/en-us/ef/core/">Entity Framework Core</a> will be used to manage communication of the app with a database. Let's install the framework:</p>

<ul>
<li>find Dependencies of DHTMLX.Gantt in the project tree</li>
<li>call the context menu and select <em>Manage NuGet packages</em> </li>
<li>open the <em>Browse</em> tab and install <strong>Microsoft.EntityFrameworkCore.SqlServer</strong></li>
</ul>

<p><img src="media/desktop/install_ef_dotnet_core.png" alt="dhtmlxGantt with ASP.NET Core 2 EF core installation" /></p>

<h4>Create Entity Context</h4>

<p>Next you need to define a session with the database and enable loading and saving data. For this, create Context:</p>

<ul>
<li>add the <strong>GanttContext.cs</strong> file in the <em>Models</em> folder </li>
<li>define the <strong>GanttContext</strong> class in the created file</li>
</ul>

<p class='snippet'> DHX.Gantt/Models/GanttContext.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> GanttContext <span class="sy0">:</span> DbContext
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> GanttContext<span class="br0">&#40;</span>DbContextOptions<span class="sy0">&lt;</span>GanttContext<span class="sy0">&gt;</span> options<span class="br0">&#41;</span>
           <span class="sy0">:</span> base<span class="br0">&#40;</span>options<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
        <span class="br0">&#125;</span>
        <span class="kw2">public</span> DbSet<span class="sy0">&lt;</span>Task<span class="sy0">&gt;</span> Tasks <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> DbSet<span class="sy0">&lt;</span>Link<span class="sy0">&gt;</span> Links <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h4>Add First Records to Database</h4>

<p>Now you can add records to the database. Let's create the database initializer that will populate the database with tasks. 
In the <strong>Models</strong> folder define a class and call it <strong>GanttSeeder</strong>. The class will have the <strong>Seed()</strong> method that will add tasks and links to the database.</p>

<p class='snippet'> DHX.Gantt/Models/GanttSeeder.cs</p>

<pre><code><pre class="js">using System<span class="sy0">;</span>
using System.<span class="me1">Collections</span>.<span class="me1">Generic</span><span class="sy0">;</span>
using System.<span class="me1">Linq</span><span class="sy0">;</span>
&nbsp;
using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> static <span class="kw2">class</span> GanttSeeder
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> static <span class="kw1">void</span> Seed<span class="br0">&#40;</span>GanttContext context<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>context.<span class="me1">Tasks</span>.<span class="me1">Any</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            <span class="br0">&#123;</span>
                <span class="kw1">return</span><span class="sy0">;</span>   <span class="co1">// DB has been seeded</span>
            <span class="br0">&#125;</span>
&nbsp;
            using <span class="br0">&#40;</span><span class="kw2">var</span> transaction <span class="sy0">=</span> context.<span class="me1">Database</span>.<span class="me1">BeginTransaction</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            <span class="br0">&#123;</span>
               List<span class="sy0">&lt;</span>Task<span class="sy0">&gt;</span> tasks <span class="sy0">=</span> <span class="kw2">new</span> List<span class="sy0">&lt;</span>Task<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
               <span class="br0">&#123;</span>
                  <span class="kw2">new</span> Task<span class="br0">&#40;</span><span class="br0">&#41;</span>
                    <span class="br0">&#123;</span>
                       Id <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span>
                       Text <span class="sy0">=</span> <span class="st0">&quot;Project #2&quot;</span><span class="sy0">,</span>
                       StartDate <span class="sy0">=</span> DateTime.<span class="me1">Today</span>.<span class="me1">AddDays</span><span class="br0">&#40;</span><span class="sy0">-</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">,</span>
                       Duration <span class="sy0">=</span> <span class="nu0">18</span><span class="sy0">,</span>
                       Progress <span class="sy0">=</span> 0.4m<span class="sy0">,</span>
                       ParentId <span class="sy0">=</span> <span class="kw2">null</span>
                    <span class="br0">&#125;</span><span class="sy0">,</span>
                    <span class="kw2">new</span> Task<span class="br0">&#40;</span><span class="br0">&#41;</span>
                    <span class="br0">&#123;</span>
                       Id <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span>
                       Text <span class="sy0">=</span> <span class="st0">&quot;Task #1&quot;</span><span class="sy0">,</span>
                       StartDate <span class="sy0">=</span> DateTime.<span class="me1">Today</span>.<span class="me1">AddDays</span><span class="br0">&#40;</span><span class="sy0">-</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">,</span>
                       Duration <span class="sy0">=</span> <span class="nu0">8</span><span class="sy0">,</span>
                       Progress <span class="sy0">=</span> 0.6m<span class="sy0">,</span>
                       ParentId <span class="sy0">=</span> <span class="nu0">1</span>
                    <span class="br0">&#125;</span><span class="sy0">,</span>
                    <span class="kw2">new</span> Task<span class="br0">&#40;</span><span class="br0">&#41;</span>
                    <span class="br0">&#123;</span>
                       Id <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">,</span>
                       Text <span class="sy0">=</span> <span class="st0">&quot;Task #2&quot;</span><span class="sy0">,</span>
                       StartDate <span class="sy0">=</span> DateTime.<span class="me1">Today</span>.<span class="me1">AddDays</span><span class="br0">&#40;</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">,</span>
                       Duration <span class="sy0">=</span> <span class="nu0">8</span><span class="sy0">,</span>
                       Progress <span class="sy0">=</span> 0.6m<span class="sy0">,</span>
                       ParentId <span class="sy0">=</span> <span class="nu0">1</span>
                    <span class="br0">&#125;</span>
               <span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
               tasks.<span class="me1">ForEach</span><span class="br0">&#40;</span>s <span class="sy0">=&gt;</span> context.<span class="me1">Tasks</span>.<span class="me1">Add</span><span class="br0">&#40;</span>s<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               context.<span class="me1">Database</span>.<span class="me1">ExecuteSqlCommand</span><span class="br0">&#40;</span><span class="st0">&quot;SET IDENTITY_INSERT Tasks ON;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
               context.<span class="me1">Database</span>.<span class="me1">ExecuteSqlCommand</span><span class="br0">&#40;</span><span class="st0">&quot;SET IDENTITY_INSERT Tasks OFF;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               List<span class="sy0">&lt;</span>Link<span class="sy0">&gt;</span> links <span class="sy0">=</span> <span class="kw2">new</span> List<span class="sy0">&lt;</span>Link<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
               <span class="br0">&#123;</span>
                   <span class="kw2">new</span> Link<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>Id <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> SourceTaskId <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> TargetTaskId <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span> Type <span class="sy0">=</span> <span class="st0">&quot;1&quot;</span><span class="br0">&#125;</span><span class="sy0">,</span>
                   <span class="kw2">new</span> Link<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>Id <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span> SourceTaskId <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span> TargetTaskId <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">,</span> Type <span class="sy0">=</span> <span class="st0">&quot;0&quot;</span><span class="br0">&#125;</span>
               <span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
               links.<span class="me1">ForEach</span><span class="br0">&#40;</span>s <span class="sy0">=&gt;</span> context.<span class="me1">Links</span>.<span class="me1">Add</span><span class="br0">&#40;</span>s<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               context.<span class="me1">Database</span>.<span class="me1">ExecuteSqlCommand</span><span class="br0">&#40;</span><span class="st0">&quot;SET IDENTITY_INSERT Links ON;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               context.<span class="me1">Database</span>.<span class="me1">ExecuteSqlCommand</span><span class="br0">&#40;</span><span class="st0">&quot;SET IDENTITY_INSERT Links OFF;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               transaction.<span class="me1">Commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h4>Register Database</h4>

<p>Now you should register the database in <strong>Startup.cs</strong>. But first you need a connection string for it. It will be stored<br />
<a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-2.1&tabs=basicconfiguration#configuration-by-environment">in a JSON file in the application settings </a>.
Create the <strong>appsettings.json</strong> file (or open it if you have it already) and add a connection string to the database:</p>

<p class='snippet'> appsettings.json</p>

<pre><code><pre class="js"><span class="br0">&#123;</span>
  <span class="st0">&quot;ConnectionStrings&quot;</span><span class="sy0">:</span> <span class="br0">&#123;</span>
    <span class="st0">&quot;DefaultConnection&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Server=(localdb)<span class="es0">\\</span>mssqllocaldb;
        Database=GanttDatabase;Trusted_Connection=True;&quot;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>The database context will be registered via 
<a href="https://docs.microsoft.com/en-us/ef/core/get-started/aspnetcore/new-db?view=aspnetcore-2.1#register-your-context-with-dependency-injection">dependency injection</a>.</p>

<p>Add the following namespaces to <strong>Startup.cs</strong>:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
using Microsoft.<span class="me1">Extensions</span>.<span class="me1">Configuration</span><span class="sy0">;</span></pre></code></pre>

<p>The declaration will look like this:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js"><span class="kw2">public</span> IConfiguration Configuration <span class="br0">&#123;</span> get<span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="kw2">public</span> Startup<span class="br0">&#40;</span>IConfiguration configuration<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    Configuration <span class="sy0">=</span> configuration<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw1">void</span> ConfigureServices<span class="br0">&#40;</span>IServiceCollection services<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    services.<span class="me1">AddDbContext</span><span class="sy0">&lt;</span>GanttContext<span class="sy0">&gt;</span><span class="br0">&#40;</span>options <span class="sy0">=&gt;</span> 
        options.<span class="me1">UseSqlServer</span><span class="br0">&#40;</span>Configuration.<span class="me1">GetConnectionString</span><span class="br0">&#40;</span><span class="st0">&quot;DefaultConnection&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Here is the complete code of <strong>Startup.cs</strong>:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Builder</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Hosting</span><span class="sy0">;</span>
using Microsoft.<span class="me1">Extensions</span>.<span class="me1">DependencyInjection</span><span class="sy0">;</span>
&nbsp;
using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
using Microsoft.<span class="me1">Extensions</span>.<span class="me1">Configuration</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>
<span class="br0">&#123;</span>
 <span class="kw2">public</span> <span class="kw2">class</span> Startup
   <span class="br0">&#123;</span>
    <span class="kw2">public</span> IConfiguration Configuration <span class="br0">&#123;</span> get<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> Startup<span class="br0">&#40;</span>IConfiguration configuration<span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
        Configuration <span class="sy0">=</span> configuration<span class="sy0">;</span>
     <span class="br0">&#125;</span>
&nbsp;
&nbsp;
     <span class="co1">//This method is called by the runtime. Use it to add services to the container.</span>
     <span class="co1">//More info on app config here - https://go.microsoft.com/fwlink/?LinkID=398940</span>
     <span class="kw2">public</span> <span class="kw1">void</span> ConfigureServices<span class="br0">&#40;</span>IServiceCollection services<span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
       services.<span class="me1">AddDbContext</span><span class="sy0">&lt;</span>GanttContext<span class="sy0">&gt;</span><span class="br0">&#40;</span>options <span class="sy0">=&gt;</span> 
         options.<span class="me1">UseSqlServer</span><span class="br0">&#40;</span>Configuration.<span class="me1">GetConnectionString</span><span class="br0">&#40;</span><span class="st0">&quot;DefaultConnection&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
&nbsp;
     <span class="co1">//The method is called by the runtime. Use it to configure HTTP request pipeline.</span>
     <span class="kw2">public</span> <span class="kw1">void</span> Configure<span class="br0">&#40;</span>IApplicationBuilder app<span class="sy0">,</span> IHostingEnvironment env<span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
       <span class="kw1">if</span> <span class="br0">&#40;</span>env.<span class="me1">IsDevelopment</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
       <span class="br0">&#123;</span>
          app.<span class="me1">UseDeveloperExceptionPage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
       <span class="br0">&#125;</span>
&nbsp;
       app.<span class="me1">UseDefaultFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
       app.<span class="me1">UseStaticFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Finally, you need to initialize and seed the database on the app startup. Normally, you'd want to use migrations for that, but for simplicity they aren't used here.</p>

<p>Let's begin with creating a class where initialization will be done. Create the <strong>GanttInitializerExtension.cs</strong> file in the <strong>Models</strong> folder:</p>

<p class='snippet'> Models/GanttInitializerExtension.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">Extensions</span>.<span class="me1">DependencyInjection</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Hosting</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
  <span class="kw2">public</span> static <span class="kw2">class</span> GanttInitializerExtension
  <span class="br0">&#123;</span>
    <span class="kw2">public</span> static IWebHost InitializeDatabase<span class="br0">&#40;</span><span class="kw1">this</span> IWebHost webHost<span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
      <span class="kw2">var</span> serviceScopeFactory <span class="sy0">=</span> 
       <span class="br0">&#40;</span>IServiceScopeFactory<span class="br0">&#41;</span>webHost.<span class="me1">Services</span>.<span class="me1">GetService</span><span class="br0">&#40;</span><span class="kw1">typeof</span><span class="br0">&#40;</span>IServiceScopeFactory<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
      using <span class="br0">&#40;</span><span class="kw2">var</span> scope <span class="sy0">=</span> serviceScopeFactory.<span class="me1">CreateScope</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
       <span class="br0">&#123;</span>
          <span class="kw2">var</span> services <span class="sy0">=</span> scope.<span class="me1">ServiceProvider</span><span class="sy0">;</span>
          <span class="kw2">var</span> dbContext <span class="sy0">=</span> services.<span class="me1">GetRequiredService</span><span class="sy0">&lt;</span>GanttContext<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          dbContext.<span class="me1">Database</span>.<span class="me1">EnsureCreated</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          GanttSeeder.<span class="me1">Seed</span><span class="br0">&#40;</span>dbContext<span class="br0">&#41;</span><span class="sy0">;</span>
       <span class="br0">&#125;</span>
&nbsp;
       <span class="kw1">return</span> webHost<span class="sy0">;</span>
     <span class="br0">&#125;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Next call <strong>InitializeDatabase()</strong> in the <em>Program.Main</em> pipeline:</p>

<p class='snippet'> Program.cs</p>

<pre><code><pre class="js">using Microsoft.<span class="me1">AspNetCore</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Hosting</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> Program
    <span class="br0">&#123;</span>
&nbsp;
        <span class="kw2">public</span> static <span class="kw1">void</span> Main<span class="br0">&#40;</span>string<span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            BuildWebHost<span class="br0">&#40;</span>args<span class="br0">&#41;</span>
<span class="xtra ln-xtra">                .<span class="me1">InitializeDatabase</span><span class="br0">&#40;</span><span class="br0">&#41;</span> </span>                .<span class="me1">Run</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw2">public</span> static IWebHost BuildWebHost<span class="br0">&#40;</span>string<span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span> <span class="sy0">=&gt;</span>
            WebHost.<span class="me1">CreateDefaultBuilder</span><span class="br0">&#40;</span>args<span class="br0">&#41;</span>
                .<span class="me1">UseStartup</span><span class="sy0">&lt;</span>Startup<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
                .<span class="me1">Build</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>As it was mentioned above, migrations aren't used in this tutorial. Instead simple <em>EnsureCreated</em> and <em>seed</em> are used.</p>

<p>The current part is finished, let's return to Gantt.</p>

<h3>Define DTOs and Mapping</h3>

<p>It is high time to define DTO classes that will be used for Web API. Let's begin with the DTO class for Task. In the <strong>Models</strong> folder create a file and define the <strong>WebApiTask.cs</strong> class:</p>

<p class='snippet'> Models/WebApiTask.cs</p>

<pre><code><pre class="js">using System<span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> WebApiTask
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> int id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string text <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string start_date <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int duration <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> decimal progress <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int<span class="sy0">?</span> parent <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> bool <span class="kw3">open</span>
        <span class="br0">&#123;</span>
            get <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span> <span class="br0">&#125;</span>
            set <span class="br0">&#123;</span> <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw2">public</span> static explicit operator WebApiTask<span class="br0">&#40;</span>Task task<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="kw2">new</span> WebApiTask
            <span class="br0">&#123;</span>
                id <span class="sy0">=</span> task.<span class="me1">Id</span><span class="sy0">,</span>
                text <span class="sy0">=</span> task.<span class="me1">Text</span><span class="sy0">,</span>
                start_date <span class="sy0">=</span> task.<span class="me1">StartDate</span>.<span class="me1">ToString</span><span class="br0">&#40;</span><span class="st0">&quot;yyyy-MM-dd HH:mm&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
                duration <span class="sy0">=</span> task.<span class="me1">Duration</span><span class="sy0">,</span>
                parent <span class="sy0">=</span> task.<span class="me1">ParentId</span><span class="sy0">,</span>
                type <span class="sy0">=</span> task.<span class="me1">Type</span><span class="sy0">,</span>
                progress <span class="sy0">=</span> task.<span class="me1">Progress</span>
            <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw2">public</span> static explicit operator Task<span class="br0">&#40;</span>WebApiTask task<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="kw2">new</span> Task
            <span class="br0">&#123;</span>
                Id <span class="sy0">=</span> task.<span class="me1">id</span><span class="sy0">,</span>
                Text <span class="sy0">=</span> task.<span class="me1">text</span><span class="sy0">,</span>
                StartDate <span class="sy0">=</span> DateTime.<span class="me1">Parse</span><span class="br0">&#40;</span>task.<span class="me1">start_date</span><span class="sy0">,</span> 
                    System.<span class="me1">Globalization</span>.<span class="me1">CultureInfo</span>.<span class="me1">InvariantCulture</span><span class="br0">&#41;</span><span class="sy0">,</span>
                Duration <span class="sy0">=</span> task.<span class="me1">duration</span><span class="sy0">,</span>
                ParentId <span class="sy0">=</span> task.<span class="me1">parent</span><span class="sy0">,</span>
                Type <span class="sy0">=</span> task.<span class="me1">type</span><span class="sy0">,</span>
                Progress <span class="sy0">=</span> task.<span class="me1">progress</span>
            <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>And this is the DTO class for Link defined in the file called <strong>WebApiLink.cs</strong> in the <strong>Models</strong> folder:</p>

<p class='snippet'> Models/WebApiLink.cs</p>

<pre><code><pre class="js"><span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> WebApiLink
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> int id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int source <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int target <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
        <span class="kw2">public</span> static explicit operator WebApiLink<span class="br0">&#40;</span>Link link<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="kw2">new</span> WebApiLink
            <span class="br0">&#123;</span>
                id <span class="sy0">=</span> link.<span class="me1">Id</span><span class="sy0">,</span>
                type <span class="sy0">=</span> link.<span class="me1">Type</span><span class="sy0">,</span>
                source <span class="sy0">=</span> link.<span class="me1">SourceTaskId</span><span class="sy0">,</span>
                target <span class="sy0">=</span> link.<span class="me1">TargetTaskId</span>
            <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw2">public</span> static explicit operator Link<span class="br0">&#40;</span>WebApiLink link<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="kw2">new</span> Link
            <span class="br0">&#123;</span>
                Id <span class="sy0">=</span> link.<span class="me1">id</span><span class="sy0">,</span>
                Type <span class="sy0">=</span> link.<span class="me1">type</span><span class="sy0">,</span>
                SourceTaskId <span class="sy0">=</span> link.<span class="me1">source</span><span class="sy0">,</span>
                TargetTaskId <span class="sy0">=</span> link.<span class="me1">target</span>
            <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>When you finish this step, you should get the following folder structure:</p>

<p><img src="media/desktop/dotnet_core_all_models.png" alt="Gantt ASP.NET Core 2 All models" /></p>

<p>Now you can run the app in order to check that everything is in place. If you don't see a runtime error, then everything is fine.</p>

<a name='step4implementingwebapi'><h2>Step 4. Implementing Web API</h2></a>

<p>Now it's time for the actual REST API implementation. Go to <strong>Startup.cs</strong> and enable MVC routing, if it's not enabled yet:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js"><span class="kw2">public</span> <span class="kw1">void</span> ConfigureServices<span class="br0">&#40;</span>IServiceCollection services<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
<span class="xtra ln-xtra">    services.<span class="me1">AddMvc</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </span>    services.<span class="me1">AddDbContext</span><span class="sy0">&lt;</span>GanttContext<span class="sy0">&gt;</span><span class="br0">&#40;</span>options <span class="sy0">=&gt;</span> 
        options.<span class="me1">UseSqlServer</span><span class="br0">&#40;</span>Configuration.<span class="me1">GetConnectionString</span><span class="br0">&#40;</span><span class="st0">&quot;DefaultConnection&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//The method is called by the runtime. Use it to configure HTTP request pipeline.</span>
<span class="kw2">public</span> <span class="kw1">void</span> Configure<span class="br0">&#40;</span>IApplicationBuilder app<span class="sy0">,</span> IHostingEnvironment env<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>env.<span class="me1">IsDevelopment</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        app.<span class="me1">UseDeveloperExceptionPage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    app.<span class="me1">UseDefaultFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    app.<span class="me1">UseStaticFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="xtra ln-xtra">    app.<span class="me1">UseMvc</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </span><span class="br0">&#125;</span></pre></code></pre>

<h3>Adding Controllers</h3>

<p>Create the <strong>Controllers</strong> folder and create three empty API Controllers: one for Tasks, another for Links and one more for the whole dataset:</p>

<p><img src="media/desktop/adding_controllers.png" alt="Gantt ASP.NET Core 2 adding controllers" /></p>

<h4>Task Controller</h4>

<p>Let's create a controller for Tasks. It will define basic CRUD operations for Gantt tasks.</p>

<p>How it works:</p>

<ul>
<li>in GET requests tasks are loaded from the database and the output is the data transfer objects of the tasks;</li>
<li>in PUT/POST requests tasks come from the client as WebAPITask classes. They are represented in this way in dhtmlxGantt. 
So, you should convert them into the format of our data model for EntityFramework (Task class). After that it will be possible to save changes in DatabaseContext.</li>
</ul>

<p class='snippet'> Controllers/TaskController.cs</p>

<pre><code><pre class="js">using System.<span class="me1">Collections</span>.<span class="me1">Generic</span><span class="sy0">;</span>
using System.<span class="me1">Linq</span><span class="sy0">;</span>
using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Mvc</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Controllers</span>
<span class="br0">&#123;</span>
    <span class="br0">&#91;</span>Produces<span class="br0">&#40;</span><span class="st0">&quot;application/json&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="br0">&#91;</span>Route<span class="br0">&#40;</span><span class="st0">&quot;api/task&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> TaskController <span class="sy0">:</span> Controller
    <span class="br0">&#123;</span>
        <span class="kw2">private</span> readonly GanttContext _context<span class="sy0">;</span>
        <span class="kw2">public</span> TaskController<span class="br0">&#40;</span>GanttContext context<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            _context <span class="sy0">=</span> context<span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// GET api/task</span>
        <span class="br0">&#91;</span>HttpGet<span class="br0">&#93;</span>
        <span class="kw2">public</span> IEnumerable<span class="sy0">&lt;</span>WebApiTask<span class="sy0">&gt;</span> Get<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> _context.<span class="me1">Tasks</span>
                .<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
                .<span class="me1">Select</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiTask<span class="br0">&#41;</span>t<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// GET api/task/5</span>
        <span class="br0">&#91;</span>HttpGet<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> WebApiTask Get<span class="br0">&#40;</span>int id<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="br0">&#40;</span>WebApiTask<span class="br0">&#41;</span>_context
                .<span class="me1">Tasks</span>
                .<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// POST api/task</span>
        <span class="br0">&#91;</span>HttpPost<span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult Post<span class="br0">&#40;</span>WebApiTask apiTask<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> newTask <span class="sy0">=</span> <span class="br0">&#40;</span>Task<span class="br0">&#41;</span>apiTask<span class="sy0">;</span>
&nbsp;
            _context.<span class="me1">Tasks</span>.<span class="me1">Add</span><span class="br0">&#40;</span>newTask<span class="br0">&#41;</span><span class="sy0">;</span>
            _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                tid <span class="sy0">=</span> newTask.<span class="me1">Id</span><span class="sy0">,</span>
                action <span class="sy0">=</span> <span class="st0">&quot;inserted&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// PUT api/task/5</span>
        <span class="br0">&#91;</span>HttpPut<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult Put<span class="br0">&#40;</span>int id<span class="sy0">,</span> WebApiTask apiTask<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> updatedTask <span class="sy0">=</span> <span class="br0">&#40;</span>Task<span class="br0">&#41;</span>apiTask<span class="sy0">;</span>
            <span class="kw2">var</span> dbTask <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
            dbTask.<span class="me1">Text</span> <span class="sy0">=</span> updatedTask.<span class="me1">Text</span><span class="sy0">;</span>
            dbTask.<span class="me1">StartDate</span> <span class="sy0">=</span> updatedTask.<span class="me1">StartDate</span><span class="sy0">;</span>
            dbTask.<span class="me1">Duration</span> <span class="sy0">=</span> updatedTask.<span class="me1">Duration</span><span class="sy0">;</span>
            dbTask.<span class="me1">ParentId</span> <span class="sy0">=</span> updatedTask.<span class="me1">ParentId</span><span class="sy0">;</span>
            dbTask.<span class="me1">Progress</span> <span class="sy0">=</span> updatedTask.<span class="me1">Progress</span><span class="sy0">;</span>
            dbTask.<span class="me1">Type</span> <span class="sy0">=</span> updatedTask.<span class="me1">Type</span><span class="sy0">;</span>
&nbsp;
            _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                action <span class="sy0">=</span> <span class="st0">&quot;updated&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// DELETE api/task/5</span>
        <span class="br0">&#91;</span>HttpDelete<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult DeleteTask<span class="br0">&#40;</span>int id<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> task <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>task <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span>
            <span class="br0">&#123;</span>
                _context.<span class="me1">Tasks</span>.<span class="me1">Remove</span><span class="br0">&#40;</span>task<span class="br0">&#41;</span><span class="sy0">;</span>
                _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                action <span class="sy0">=</span> <span class="st0">&quot;deleted&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h4>Link Controller</h4>

<p>Next you should create a controller for Links:</p>

<p class='snippet'> Controllers/LinkController.cs</p>

<pre><code><pre class="js">using System.<span class="me1">Collections</span>.<span class="me1">Generic</span><span class="sy0">;</span>
using System.<span class="me1">Linq</span><span class="sy0">;</span>
using Microsoft.<span class="me1">EntityFrameworkCore</span><span class="sy0">;</span>
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Mvc</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Controllers</span>
<span class="br0">&#123;</span>
    <span class="br0">&#91;</span>Produces<span class="br0">&#40;</span><span class="st0">&quot;application/json&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="br0">&#91;</span>Route<span class="br0">&#40;</span><span class="st0">&quot;api/link&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> LinkController <span class="sy0">:</span> Controller
    <span class="br0">&#123;</span>
        <span class="kw2">private</span> readonly GanttContext _context<span class="sy0">;</span>
        <span class="kw2">public</span> LinkController<span class="br0">&#40;</span>GanttContext context<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            _context <span class="sy0">=</span> context<span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// GET api/Link</span>
        <span class="br0">&#91;</span>HttpGet<span class="br0">&#93;</span>
        <span class="kw2">public</span> IEnumerable<span class="sy0">&lt;</span>WebApiLink<span class="sy0">&gt;</span> Get<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> _context.<span class="me1">Links</span>
                .<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
                .<span class="me1">Select</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiLink<span class="br0">&#41;</span>t<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// GET api/Link/5</span>
        <span class="br0">&#91;</span>HttpGet<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> WebApiLink Get<span class="br0">&#40;</span>int id<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="br0">&#40;</span>WebApiLink<span class="br0">&#41;</span>_context
                .<span class="me1">Links</span>
                .<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// POST api/Link</span>
        <span class="br0">&#91;</span>HttpPost<span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult Post<span class="br0">&#40;</span>WebApiLink apiLink<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> newLink <span class="sy0">=</span> <span class="br0">&#40;</span>Link<span class="br0">&#41;</span>apiLink<span class="sy0">;</span>
&nbsp;
            _context.<span class="me1">Links</span>.<span class="me1">Add</span><span class="br0">&#40;</span>newLink<span class="br0">&#41;</span><span class="sy0">;</span>
            _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                tid <span class="sy0">=</span> newLink.<span class="me1">Id</span><span class="sy0">,</span>
                action <span class="sy0">=</span> <span class="st0">&quot;inserted&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// PUT api/Link/5</span>
        <span class="br0">&#91;</span>HttpPut<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult Put<span class="br0">&#40;</span>int id<span class="sy0">,</span> WebApiLink apiLink<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> updatedLink <span class="sy0">=</span> <span class="br0">&#40;</span>Link<span class="br0">&#41;</span>apiLink<span class="sy0">;</span>
            updatedLink.<span class="me1">Id</span> <span class="sy0">=</span> id<span class="sy0">;</span>
            _context.<span class="me1">Entry</span><span class="br0">&#40;</span>updatedLink<span class="br0">&#41;</span>.<span class="me1">State</span> <span class="sy0">=</span> EntityState.<span class="me1">Modified</span><span class="sy0">;</span>
&nbsp;
&nbsp;
            _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                action <span class="sy0">=</span> <span class="st0">&quot;updated&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// DELETE api/Link/5</span>
        <span class="br0">&#91;</span>HttpDelete<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
        <span class="kw2">public</span> ObjectResult DeleteLink<span class="br0">&#40;</span>int id<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw2">var</span> Link <span class="sy0">=</span> _context.<span class="me1">Links</span>.<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>Link <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span>
            <span class="br0">&#123;</span>
                _context.<span class="me1">Links</span>.<span class="me1">Remove</span><span class="br0">&#40;</span>Link<span class="br0">&#41;</span><span class="sy0">;</span>
                _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
&nbsp;
            <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
            <span class="br0">&#123;</span>
                action <span class="sy0">=</span> <span class="st0">&quot;deleted&quot;</span>
            <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h4>Data Controller</h4>

<p>Finally, you need to create a controller for a data action:</p>

<p class='snippet'> Controllers/DataController.cs</p>

<pre><code><pre class="js">using System.<span class="me1">Collections</span>.<span class="me1">Generic</span><span class="sy0">;</span>
using System.<span class="me1">Linq</span><span class="sy0">;</span>
&nbsp;
using Microsoft.<span class="me1">AspNetCore</span>.<span class="me1">Mvc</span><span class="sy0">;</span>
using DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Controllers</span>
<span class="br0">&#123;</span>
    <span class="br0">&#91;</span>Produces<span class="br0">&#40;</span><span class="st0">&quot;application/json&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="br0">&#91;</span>Route<span class="br0">&#40;</span><span class="st0">&quot;api/data&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> DataController <span class="sy0">:</span> Controller
    <span class="br0">&#123;</span>
        <span class="kw2">private</span> readonly GanttContext _context<span class="sy0">;</span>
        <span class="kw2">public</span> DataController<span class="br0">&#40;</span>GanttContext context<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            _context <span class="sy0">=</span> context<span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// GET api/data</span>
        <span class="br0">&#91;</span>HttpGet<span class="br0">&#93;</span>
        <span class="kw2">public</span> object Get<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">return</span> <span class="kw2">new</span>
            <span class="br0">&#123;</span>
                data <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">Select</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiTask<span class="br0">&#41;</span>t<span class="br0">&#41;</span><span class="sy0">,</span>
                links <span class="sy0">=</span> _context.<span class="me1">Links</span>.<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">Select</span><span class="br0">&#40;</span>l <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiLink<span class="br0">&#41;</span>l<span class="br0">&#41;</span>
&nbsp;
            <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Everything is ready. You can run the application and see the fully-fledged Gantt.</p>

<p><img src="media/desktop/ready_gantt_dotnet_core.png" alt="Gantt ASP.NET Core 2 Gantt is ready" /></p>

<p><a href="https://github.com/DHTMLX/gantt-howto-dotnet-core/">You can also view the full source code on GitHub</a>.</p>

<a name='errorhandling'><h2>Error handling</h2></a>

<p>In order to handle errors, you need to declare a special <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/startup?view=aspnetcore-2.1#startup-filters">middleware class</a> 
that will capture runtime exceptions and write responses. Next it will be added to the app request pipeline. Follow the steps below:</p>

<p>1&#46; Create a middleware class from a template in the project folder.</p>

<p><img src="media/desktop/dotnet_core_middleware.png" alt="Gantt ASP.NET Core 2 middleware class" /></p>

<p>2&#46; Find the <strong>invoke</strong> method and note the <code>_next</code> call. Some handlers can throw exceptions, so let's catch them. Wrap the <code>_next</code> call with a <code>try-catch</code> block and run our handler if an error is captured.</p>

<p class='snippet'> GanttErrorMiddleware.cs</p>

<pre><code><pre class="js"><span class="kw2">public</span> async Task Invoke<span class="br0">&#40;</span>HttpContext httpContext<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">try</span>
    <span class="br0">&#123;</span>
        await _next<span class="br0">&#40;</span>httpContext<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span><span class="kw1">catch</span><span class="br0">&#40;</span>Exception e<span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        await HandleExceptionAsync<span class="br0">&#40;</span>httpContext<span class="sy0">,</span> e<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>           
<span class="br0">&#125;</span>
<span class="kw2">private</span> static Task HandleExceptionAsync<span class="br0">&#40;</span>HttpContext context<span class="sy0">,</span> Exception exception<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw2">var</span> result <span class="sy0">=</span> JsonConvert.<span class="me1">SerializeObject</span><span class="br0">&#40;</span><span class="kw2">new</span> <span class="br0">&#123;</span>
        action <span class="sy0">=</span> <span class="st0">&quot;error&quot;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    context.<span class="me1">Response</span>.<span class="me1">ContentType</span> <span class="sy0">=</span> <span class="st0">&quot;application/json&quot;</span><span class="sy0">;</span>
    context.<span class="me1">Response</span>.<span class="me1">StatusCode</span> <span class="sy0">=</span> StatusCodes.<span class="me1">Status500InternalServerError</span><span class="sy0">;</span>
    <span class="kw1">return</span> context.<span class="me1">Response</span>.<span class="me1">WriteAsync</span><span class="br0">&#40;</span>result<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>3&#46; The middleware is ready. Now go to <strong>Startup.cs</strong> and connect the middleware in the <strong>Configure()</strong> method:</p>

<p class='snippet'> Startup.cs</p>

<pre><code><pre class="js"><span class="kw2">public</span> <span class="kw1">void</span> Configure<span class="br0">&#40;</span>IApplicationBuilder app<span class="sy0">,</span> IHostingEnvironment env<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>env.<span class="me1">IsDevelopment</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            app.<span class="me1">UseDeveloperExceptionPage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>   
&nbsp;
<span class="xtra ln-xtra">    app.<span class="me1">UseGanttErrorMiddleware</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </span>    app.<span class="me1">UseDefaultFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    app.<span class="me1">UseStaticFiles</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    app.<span class="me1">UseMvc</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></code></pre>

<a name='storingtheorderoftasks'><h2>Storing the order of tasks</h2></a>

<p>Users can rearrange tasks with drag and drop in the client-side gantt. If you use this feature, you should store the order of tasks in the database. 
For details read <a class="link-" href="desktop__server_side.html#storingtheorderoftasks">this section</a>.</p>

<p>Read on to find out how to enable storing the order of tasks for gantt.</p>

<h3>Reordering on the Client Side</h3>

<p>First enable reordering of tasks on the client side. Add these lines to <strong>index.html</strong>:</p>

<p class='snippet'> wwwroot/index.html</p>

<pre><code><pre class="js">gantt.<span class="me1">config</span>.<span class="me1">order_branch</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
gantt.<span class="me1">config</span>.<span class="me1">order_branch_free</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// specifying the date format</span>
gantt.<span class="me1">config</span>.<span class="me1">date_format</span> <span class="sy0">=</span> <span class="st0">&quot;%Y-%m-%d %H:%i&quot;</span><span class="sy0">;</span>
<span class="co1">// initializing gantt</span>
gantt.<span class="me1">init</span><span class="br0">&#40;</span><span class="st0">&quot;gantt_here&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></code></pre>

<h3>Adding tasks order to the model</h3>

<p>Next you must change the backend so that it reflected the current order of tasks. Add one more method to the <strong>Task</strong> model:</p>

<p class='snippet'> Models/Task.cs</p>

<pre><code><pre class="js">using System<span class="sy0">;</span>
&nbsp;
<span class="kw2">namespace</span> DHX.<span class="me1">Gantt</span>.<span class="me1">Models</span>
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">class</span> Task
    <span class="br0">&#123;</span>
        <span class="kw2">public</span> int Id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string Text <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> DateTime StartDate <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int Duration <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> decimal Progress <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> int<span class="sy0">?</span> ParentId <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
        <span class="kw2">public</span> string Type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="xtra ln-xtra">        <span class="kw2">public</span> int SortOrder <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span> </span>    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<h3>Updating Controllers</h3>

<p>You will also need to update controllers.</p>

<p>1&#46; The client side should receive tasks ordered by the <strong>SortOrder</strong> value. Add the highlighted line to DataController:</p>

<p class='snippet'> Controllers/DataController.cs</p>

<pre><code><pre class="js"><span class="br0">&#91;</span>HttpGet<span class="br0">&#93;</span>
<span class="kw2">public</span> object Get<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="kw2">new</span>
        <span class="br0">&#123;</span>
            data <span class="sy0">=</span> _context.<span class="me1">Tasks</span>
<span class="xtra ln-xtra">           .<span class="me1">OrderBy</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">SortOrder</span><span class="br0">&#41;</span> </span>           .<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
           .<span class="me1">Select</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiTask<span class="br0">&#41;</span>t<span class="br0">&#41;</span><span class="sy0">,</span>
            links <span class="sy0">=</span> _context.<span class="me1">Links</span>
                .<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
                .<span class="me1">Select</span><span class="br0">&#40;</span>l <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>WebApiLink<span class="br0">&#41;</span>l<span class="br0">&#41;</span>
        <span class="br0">&#125;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>2&#46; New tasks should also receive the default value <strong>SortOrder</strong>:</p>

<p class='snippet'> controllers/TaskController.cs</p>

<pre><code><pre class="js"><span class="co1">// POST api/task</span>
<span class="br0">&#91;</span>HttpPost<span class="br0">&#93;</span>
<span class="kw2">public</span> IActionResult Post<span class="br0">&#40;</span>WebApiTask apiTask<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw2">var</span> newTask <span class="sy0">=</span> <span class="br0">&#40;</span>Task<span class="br0">&#41;</span>apiTask<span class="sy0">;</span>
&nbsp;
<span class="xtra ln-xtra">    newTask.<span class="me1">SortOrder</span> <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">Max</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">SortOrder</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span> </span>    _context.<span class="me1">Tasks</span>.<span class="me1">Add</span><span class="br0">&#40;</span>newTask<span class="br0">&#41;</span><span class="sy0">;</span>
    _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">return</span> Ok<span class="br0">&#40;</span><span class="kw2">new</span>
    <span class="br0">&#123;</span>
        tid <span class="sy0">=</span> newTask.<span class="me1">Id</span><span class="sy0">,</span>
        action <span class="sy0">=</span> <span class="st0">&quot;inserted&quot;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>3&#46; <strong>sortOrder</strong> should be updated when the task order is modified on the client. When a user rearranges tasks, gantt will call a PUT action and provide the info about the positions of the new task in the 
<a class="link-" href="desktop__server_side.html#storingtheorderoftasks">'target'</a> property of the request, together with the rest of task properties.</p>

<p>Add <code>target</code> to the <strong>WebApiTask.cs</strong> class:</p>

<p class='snippet'> Models/WebApiTask.cs</p>

<pre><code><pre class="js"><span class="kw2">public</span> <span class="kw2">class</span> WebApiTask
<span class="br0">&#123;</span>
    <span class="kw2">public</span> int id <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> string text <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> string start_date <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> int duration <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> decimal progress <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> int<span class="sy0">?</span> parent <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw2">public</span> string type <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="xtra ln-xtra">    <span class="kw2">public</span> string target <span class="br0">&#123;</span> get<span class="sy0">;</span> set<span class="sy0">;</span> <span class="br0">&#125;</span> </span>    <span class="kw2">public</span> bool <span class="kw3">open</span>
    <span class="br0">&#123;</span>
        get <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span> <span class="br0">&#125;</span>
        set <span class="br0">&#123;</span> <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>And now let's implement reordering in our PUT (EditTask) action. Modify the Put action of the Task controller:</p>

<p class='snippet'> Controllers/TaskController.cs</p>

<pre><code><pre class="js"><span class="co1">// PUT api/task/5</span>
<span class="br0">&#91;</span>HttpPut<span class="br0">&#40;</span><span class="st0">&quot;{id}&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
<span class="kw2">public</span> IActionResult Put<span class="br0">&#40;</span>int id<span class="sy0">,</span> WebApiTask apiTask<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw2">var</span> updatedTask <span class="sy0">=</span> <span class="br0">&#40;</span>Task<span class="br0">&#41;</span>apiTask<span class="sy0">;</span>
    updatedTask.<span class="me1">Id</span> <span class="sy0">=</span> id<span class="sy0">;</span>
&nbsp;
    <span class="kw2">var</span> dbTask <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
    dbTask.<span class="me1">Text</span> <span class="sy0">=</span> updatedTask.<span class="me1">Text</span><span class="sy0">;</span>
    dbTask.<span class="me1">StartDate</span> <span class="sy0">=</span> updatedTask.<span class="me1">StartDate</span><span class="sy0">;</span>
    dbTask.<span class="me1">Duration</span> <span class="sy0">=</span> updatedTask.<span class="me1">Duration</span><span class="sy0">;</span>
    dbTask.<span class="me1">ParentId</span> <span class="sy0">=</span> updatedTask.<span class="me1">ParentId</span><span class="sy0">;</span>
    dbTask.<span class="me1">Progress</span> <span class="sy0">=</span> updatedTask.<span class="me1">Progress</span><span class="sy0">;</span>
    dbTask.<span class="me1">Type</span> <span class="sy0">=</span> updatedTask.<span class="me1">Type</span><span class="sy0">;</span>
&nbsp;
<span class="xtra ln-xtra">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>string.<span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>apiTask.<span class="me1">target</span><span class="br0">&#41;</span><span class="br0">&#41;</span>                     </span><span class="xtra ln-xtra">    <span class="br0">&#123;</span>                                                   </span><span class="xtra ln-xtra">         <span class="co1">// reordering occurred                         </span></span><span class="xtra ln-xtra">         <span class="kw1">this</span>._UpdateOrders<span class="br0">&#40;</span>dbTask<span class="sy0">,</span> apiTask.<span class="me1">target</span><span class="br0">&#41;</span><span class="sy0">;</span>    </span><span class="xtra ln-xtra">    <span class="br0">&#125;</span>                                                   </span>&nbsp;
    _context.<span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    _return Ok<span class="br0">&#40;</span><span class="kw2">new</span>
    <span class="br0">&#123;</span>
         action <span class="sy0">=</span> <span class="st0">&quot;updated&quot;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>And add the method that will update the order of tasks:</p>

<p class='snippet'> Controllers/TaskController.cs</p>

<pre><code><pre class="js"><span class="kw2">private</span> <span class="kw1">void</span> _UpdateOrders<span class="br0">&#40;</span>Task updatedTask<span class="sy0">,</span> string orderTarget<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    int adjacentTaskId<span class="sy0">;</span>
    <span class="kw2">var</span> nextSibling <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">var</span> targetId <span class="sy0">=</span> orderTarget<span class="sy0">;</span>
&nbsp;
    <span class="co1">// adjacent task id is sent either as '{id}' or as 'next:{id}' depending </span>
    <span class="co1">// on whether it's the next or the previous sibling</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>targetId.<span class="me1">StartsWith</span><span class="br0">&#40;</span><span class="st0">&quot;next:&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        targetId <span class="sy0">=</span> targetId.<span class="me1">Replace</span><span class="br0">&#40;</span><span class="st0">&quot;next:&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        nextSibling <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>int.<span class="me1">TryParse</span><span class="br0">&#40;</span>targetId<span class="sy0">,</span> out adjacentTaskId<span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">return</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">var</span> adjacentTask <span class="sy0">=</span> _context.<span class="me1">Tasks</span>.<span class="me1">Find</span><span class="br0">&#40;</span>adjacentTaskId<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw2">var</span> startOrder <span class="sy0">=</span> adjacentTask.<span class="me1">SortOrder</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>nextSibling<span class="br0">&#41;</span>
         startOrder<span class="sy0">++;</span>
&nbsp;
    updatedTask.<span class="me1">SortOrder</span> <span class="sy0">=</span> startOrder<span class="sy0">;</span>
&nbsp;
    <span class="kw2">var</span> updateOrders <span class="sy0">=</span> _context.<span class="me1">Tasks</span>
        .<span class="me1">Where</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">Id</span> <span class="sy0">!=</span> updatedTask.<span class="me1">Id</span><span class="br0">&#41;</span>
        .<span class="me1">Where</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">SortOrder</span> <span class="sy0">&gt;=</span> startOrder<span class="br0">&#41;</span>
        .<span class="me1">OrderBy</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">SortOrder</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">var</span> taskList <span class="sy0">=</span> updateOrders.<span class="me1">ToList</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    taskList.<span class="me1">ForEach</span><span class="br0">&#40;</span>t <span class="sy0">=&gt;</span> t.<span class="me1">SortOrder</span><span class="sy0">++</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<a name='applicationsecurity'><h2>Application security</h2></a>

<p>Gantt doesn't provide any means of preventing an application from various threats, such as SQL injections, XSS and CSRF attacks. The responsibility for keeping an application safe is on the developers 
who implement the backend. Read the details in the <a class="link-hidden" href="desktop__app_security.html">corresponding article</a>.</p>

<h3>XSS protection</h3>

<p>A simple solution would be to encode the text properties of your data items when you send them to the client side.</p>

<p>For example, in the below code a built-in HtmlEncoder is used to escape HTML values in the text of tasks. That way your database will contain unmodified data, but the client side will receive safe values of <code>task.text</code>.</p>

<p class='snippet'> Models/WebApiTask.cs</p>

<pre><code><pre class="js">using System.<span class="me1">Text</span>.<span class="me1">Encodings</span>.<span class="me1">Web</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> static explicit operator WebApiTask<span class="br0">&#40;</span>Task task<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="kw2">new</span> WebApiTask
    <span class="br0">&#123;</span>
        id <span class="sy0">=</span> task.<span class="me1">Id</span><span class="sy0">,</span>
<span class="xtra ln-xtra">        text <span class="sy0">=</span> HtmlEncoder.<span class="kw2">Default</span>.<span class="me1">Encode</span><span class="br0">&#40;</span>task.<span class="me1">Text</span><span class="br0">&#41;</span><span class="sy0">,</span> </span>        start_date <span class="sy0">=</span> task.<span class="me1">StartDate</span>.<span class="me1">ToString</span><span class="br0">&#40;</span><span class="st0">&quot;yyyy-MM-dd HH:mm&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
        duration <span class="sy0">=</span> task.<span class="me1">Duration</span><span class="sy0">,</span>
        parent <span class="sy0">=</span> task.<span class="me1">ParentId</span><span class="sy0">,</span>
        type <span class="sy0">=</span> task.<span class="me1">Type</span><span class="sy0">,</span>
        progress <span class="sy0">=</span> task.<span class="me1">Progress</span>
    <span class="br0">&#125;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></code></pre>

<p>Another approach would be to use a specialized library, e.g. <a href="https://www.nuget.org/packages/HtmlAgilityPack/">HtmlAgilityPack</a> and completely strip any HTML task when you save/load the data.</p>

<a name='troubleshooting'><h2>Trouble shooting</h2></a>

<p>In case you've completed the above steps to implement Gantt integration with ASP.NET Core, but Gantt doesn't render tasks and links on a page, have a look at the <a class="link-" href="desktop__troubleshooting.html">Troubleshooting Backend Integration Issues</a> article. It describes 
the ways of identifying the roots of the problems.</p>

<a name='whatsnext'><h2>What's next</h2></a>

<p>Now you have a fully functioning gantt. You can view the full code on <a href="https://github.com/DHTMLX/gantt-howto-dotnet-core">GitHub</a>, clone or download it and use it for your projects.</p>

<p>You can also check <a class="link-" href="desktop__guides.html">guides on the numerous features of gantt</a> or tutorials on <a class="link-" href="desktop__howtostart_guides.html">integrating Gantt with other backend frameworks</a>.</p>

<!-- Content Area End -->
			<a href='desktop__howtostart_dotnet_core.html#top' class='top_link'>Back to top</a>
			<div id='disqus_thread'></div><script type='text/javascript'>var disqus_shortname = 'dhxdocumentation';var disqus_developer = 1;(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script>
		</div>
		</div>
	</div>
	<div class="footer">
		<div class='content'>
			<ul class='column'>
	<li class='group'>Tasks</li>
	<li><a href='desktop__loading_storing_data.html'>Loading</a></li>
	<li><a href='desktop__task_bars.html'>Operations</a></li>
	<li><a href='desktop__styling.html'>Look &amp; Feel</a></li>
</ul>

<ul class='column'>
	<li class='group'>Configuration</li>
	<li><a href='desktop__table.html'>Grid</a></li>
	<li><a href='desktop__time_scale.html'>Scales</a></li>
	<li><a href='desktop__edit_form.html'>Lightbox</a></li>
	<li><a href='desktop__dependencies.html'>Links</a></li>
</ul>

<ul class='column'>
	<li class='group'>PRO Edition</li>
	<li><a href='desktop__critical_path.html'>Critical Path</a></li>
	<li><a href='desktop__milestones.html'>Milestones</a></li>
	<li><a href='desktop__baselines.html'>Baselines</a></li>
</ul>

<ul class='column'>
	<li class='group'>Other Components</li>
	<li><a href='../suite/index.html'>Suite</a></li>
	<li><a href='../scheduler/index.html'>Scheduler</a></li>
	<li><a href='../pivot/index.html'>Pivot</a></li>	
	<li><a href='http://scheduler-net.com/'>Scheduler .Net</a></li>
</ul>

<ul class='column'>
	<li class='group'>API</li>
	<li><a href='api__refs__gantt_events.html'>Events</a></li>
	<li><a href='api__refs__gantt_methods.html'>Methods</a></li>
	<li><a href='api__refs__gantt_props.html'>Properties</a></li>
	<li><a href='api__refs__gantt_templates.html'>Templates</a></li>
</ul>

		</div>
	</div>
	<script src="assets/autocomplete.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		AutoComplete_init("");
		Scroll_init();
	</script>	
</body>
</html>